<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Aether's Blog</title>
    <description>Keep calm and carry on # this means to ignore newlines until &quot;baseurl:&quot;
</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 12 Feb 2019 14:55:30 +0800</pubDate>
    <lastBuildDate>Tue, 12 Feb 2019 14:55:30 +0800</lastBuildDate>
    <generator>Jekyll v3.8.5</generator>
    
      <item>
        <title>程序人生 ——Hello’s P2P</title>
        <description>&lt;h1 id=&quot;程序人生-hellos-p2p&quot;&gt;程序人生-Hello’s P2P&lt;/h1&gt;
&lt;blockquote&gt;
  &lt;p&gt;我是Hello，我是每一个程序猿¤的初恋（羞羞……）
却在短短几分钟后惨遭每个菜鸟的无情抛弃（呜呜……），他们很快喜欢上sum、sort、matrix、PR、AI、IOT、BD、MIS……，从不回头。
只有我自己知道，我的出身有多么高贵，我的一生多么坎坷！
多年后，那些真懂我的大佬（也是曾经的菜鸟一枚），才恍然感悟我的伟大！
想当年：俺才是第一个玩 P2P的: From Program to Process
懵懵懂懂的你笨笨磕磕的将我一字一键敲进电脑存成hello.c（Program），无意识中将我预处理、编译、汇编、链接，历经艰辛，我-Hello一个完美的生命诞生了。
你知道吗？在壳(Bash)里，伟大的OS（进程管理）为我fork（Process）,为我execve,为我mmap，分我时间片，让我得以在Hardware(CPU/RAM/IO)上驰骋（取指译码执行/流水线等）；
你知道吗？OS（存储管理）与MMU为VA到PA操碎了心；TLB、4级页表、3级Cache，Pagefile等等各显神通为我加速；IO管理与信号处理使尽了浑身解数，软硬结合，才使我能在键盘、主板、显卡、屏幕间游刃有余, 虽然我在台上的表演只是一瞬间、演技看起来还很Low、效果很惨白。
感谢 OS！感谢 Bash！在我完美谢幕后回收了我。  我赤条条来去无牵挂！
我朝 CS（计算机系统-Editor+Cpp+Compiler+AS+LD + OS + CPU/RAM/IO等）挥一挥手，不带走一片云彩！ 俺也是 O2O: From Zero-0 to Zero-0。
历史长河中一个个菜鸟与我擦肩而过，只有CS知道我的生、我的死，我的坎坷，“只有 CS 知道……我曾经……来…………过……”————未来一首关于Hello的歌曲绕梁千日不绝 !!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;本文从每个程序猿的初恋——hello.c出发，探究hello from Program to Process的生命周期。从代码hello.c如何一步步转变为可执行程序hello，再到shell中如何创建、加载、运行hello进程，运行过程中CPU、RAM、IO发生了什么，MMU、TLB、PageFile、四级页表、三级Cache访问在幕后贡献了多少力量，hello又是如何被回收……通过了解hello短暂而精彩的一生去理解计算机系统的具体实现。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/**
* 大作业的 hello.c 程序
* gcc -m64 -no-pie -fno-PIC hello.c -o hello
* 程序运行过程中可以按键盘，如不停乱按，包括回车，Ctrl-Z，Ctrl-C等。
* 可以 运行 ps  jobs  pstree fg 等命令
**/

#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;unistd.h&amp;gt;
#include &amp;lt;stdlib.h&amp;gt;

int sleepsecs=2.5;

int main(int argc,char *argv[])
{
	int i;

	if(argc!=3)
	{
		printf(&quot;Usage: Hello 学号 姓名！\n&quot;);
		exit(1);
	}
	for(i=0;i&amp;lt;10;i++)
	{
		printf(&quot;Hello %s %s\n&quot;,argv[1],argv[2]);
		sleep(sleepsecs);
	}
	getchar();
	return 0;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;预处理&quot;&gt;预处理&lt;/h1&gt;

&lt;h3 id=&quot;预处理的概念与作用&quot;&gt;预处理的概念与作用&lt;/h3&gt;
&lt;p&gt;预处理指在程序进行编译前对源代码进行处理的过程，生成.i文本文件。
预处理器cpp对程序源代码文本进行处理：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;扩展源代码，插入所有用#include命令指定的文件&lt;/li&gt;
  &lt;li&gt;扩展所有用#define声明指定的宏&lt;/li&gt;
  &lt;li&gt;处理所有的预编译指令&lt;/li&gt;
  &lt;li&gt;添加行号信息文件名信息，便于调试&lt;/li&gt;
  &lt;li&gt;删除所有的注释&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;在ubuntu下预处理的命令&quot;&gt;在Ubuntu下预处理的命令&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;使用预处理器cpp：cpp hello.c &amp;gt; hello.i
使用GNU编译器套件gcc：gcc hello.c –E –o hello.o
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;hello的预处理结果解析&quot;&gt;Hello的预处理结果解析&lt;/h3&gt;

&lt;p&gt;在hello.i文件的最开始的部分生成了如图2-3-1的文本，包含了文件名等文件信息，便于调试。&lt;/p&gt;

&lt;p&gt;在hello.c中使用#include引入了&lt;stdio.h&gt;。在预处理过程中cpp扩展hello.c的源代码，插入所有用#include命令指定的文件。&lt;/stdio.h&gt;&lt;/p&gt;

&lt;p&gt;由于插入头文件，在hello.i中发现了头文件中的数据定义和头文件中的函数作为外部函数。&lt;/p&gt;

&lt;p&gt;hello.c代码中有四行注释，在hello.i中发现已被删去。&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;编译&quot;&gt;编译&lt;/h1&gt;
&lt;h3 id=&quot;编译的概念与作用&quot;&gt;编译的概念与作用&lt;/h3&gt;

&lt;p&gt;编译过程产生源代码的汇编代码。编译器ccl将文本文件hello.i翻译成文本文件hello.s，hello.s中包含一个汇编语言程序。&lt;/p&gt;

&lt;h3 id=&quot;在ubuntu下编译的命令&quot;&gt;在Ubuntu下编译的命令&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;使用hello.c编译：gcc hello.c –S –o hello.s
使用hello.i编译：gcc hello.i –S –o hello.s
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;hello的编译结果解析&quot;&gt;Hello的编译结果解析&lt;/h3&gt;
&lt;h4 id=&quot;数据&quot;&gt;数据&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;常量&lt;/strong&gt;：在AT&amp;amp;T中用$加在数字前表示常量
&lt;strong&gt;变量&lt;/strong&gt;：局部变量储存在寄存器或栈中，全局变量、静态变量储存在.bss或.data中&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;类型&lt;/strong&gt;：在x86-64中根据数据占用字节数将其分为1字节的b（字节）、2字节的w（字）、4字节的d（双字）、8字节的q（四字）&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;宏&lt;/strong&gt;：在预处理时被扩展&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;C声明&lt;/th&gt;
      &lt;th&gt;Intel数据类型&lt;/th&gt;
      &lt;th&gt;汇编代码后缀&lt;/th&gt;
      &lt;th&gt;大小（字节）&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;char&lt;/td&gt;
      &lt;td&gt;字节&lt;/td&gt;
      &lt;td&gt;b&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;short&lt;/td&gt;
      &lt;td&gt;字&lt;/td&gt;
      &lt;td&gt;w&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;int&lt;/td&gt;
      &lt;td&gt;双字&lt;/td&gt;
      &lt;td&gt;l&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;long&lt;/td&gt;
      &lt;td&gt;四字&lt;/td&gt;
      &lt;td&gt;q&lt;/td&gt;
      &lt;td&gt;8&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;char*&lt;/td&gt;
      &lt;td&gt;四字&lt;/td&gt;
      &lt;td&gt;q&lt;/td&gt;
      &lt;td&gt;8&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;float&lt;/td&gt;
      &lt;td&gt;单精度&lt;/td&gt;
      &lt;td&gt;s&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;double&lt;/td&gt;
      &lt;td&gt;双精度&lt;/td&gt;
      &lt;td&gt;l&lt;/td&gt;
      &lt;td&gt;8&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&quot;赋值&quot;&gt;赋值&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;直接赋值&lt;/strong&gt;：将内存中或寄存器中或常数值移到寄存器／内存中。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;传送指令 movx src，dst 	
x可以为b,w,l,q后缀，分别对应1/2/4/8字节操作数
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;合法的操作数组合：立即数—寄存器	立即数—内存	 
 寄存器—寄存器	寄存器—内存	 
 内存—寄存器&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;逗号运算符&lt;/strong&gt;:
C语言运算符中优先级最低的一种运算符。当顺序点用，结合顺序是从左至右，用来顺序求值，完毕之后整个表达式的值是最后一个表达式的值。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;条件运算符（？：）&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;条件传送指令 cmovcc src，dst 		
cc表示条件，src只能为寄存器，dst可为内存和寄存器，其利用EFLAGS中的CF、OF、PF、SF、ZF实现条件判断。 条件：无符号数：用a、b、e、n、c分别表示大于、小于、等于、否、进位c。CPU用CF、ZF、PF实现判别。有符号数：用g、l、e、n、o分别表示大于、小于、等于、否、溢出，CPU用SF、ZF、OF实现判别。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;初值&lt;/strong&gt;：赋初值的全局变量为强符号，储存在.data节，未赋初值的全局变量为弱符号，储存在.bss节。&lt;/p&gt;

&lt;h3 id=&quot;类型转换&quot;&gt;类型转换&lt;/h3&gt;
&lt;p&gt;扩展传送指令：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;符号扩展的传送 movsbl S, D
零扩展的传送 movzbl S, D
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;算数操作&quot;&gt;算数操作&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;加+ADD/ADC	减-SUB/SBB 乘*MUL/IMUL  除/DIV/IDIV&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;逻辑左«/右移» SHL/SHR  算数左«/右移» SAL/SAR&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;通常使用&lt;strong&gt;leaq&lt;/strong&gt;指令计算形如a+bx的数据：&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;D(Rb, Ri, S) — Mem[Reg[Rb]+S*Reg[Ri]+D]&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;D为常数偏移量，Rb为基址寄存器，Ri为变址寄存器，S为比例因子。&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;逻辑位操作&quot;&gt;逻辑／位操作&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;逻辑运算： 与&amp;amp;&amp;amp; 	或|		非！&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;位运算：	与&amp;amp;	或|		非～	异或^&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;逻辑左移« SHL  逻辑右移» SHR  算数左移« SAL 算数右移» SAR&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;关系操作&quot;&gt;关系操作&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;关系包括： ==相等  !=不相等  &amp;gt;大于  &lt;小于&gt;=大于等于  &amp;lt;=小于等于&lt;/小于&gt;&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  比较指令cmpq Src1, Src2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;计算Src2-Src1但不改变目的操作数，将比较结果设置为条件码。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;CF为进位标志位	SF为符号标志位	ZF为零标志位	OF为溢出标志位&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;数组指针结构操作&quot;&gt;数组／指针／结构操作&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;指针&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;寄存器间接寻址  (R) — Mem[Reg[R]]  即指针的解引用&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;如mov (%rcx), %rax  对应
long y = *xp;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;数组&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;数组T A[L]即内存中连续分配的L*sizeof(T)字节。由于是连续的，所以可以通过偏移量访问数组。
相对寻址 D(R) — Mem[Reg[R]+D]，D为常数偏移量。
多维数组的储存为行优先&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2018/12/29/FfnQLd.jpg&quot; alt=&quot;&quot; height=&quot;60%&quot; width=&quot;70%&quot; /&gt;&lt;/p&gt;

&lt;p&gt;多层次数组： 每个元素是一个指针类型，为数组首地址。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2018/12/29/Ffn4m9.jpg&quot; alt=&quot;Ffn4m9.jpg&quot; height=&quot;60%&quot; width=&quot;70%&quot; /&gt;
&lt;strong&gt;结构体&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;完整内存寻址 D(Rb, Ri, S) — Mem[Reg[Rb]+S*Reg[Ri]+D]
D为常数偏移量，Rb为基址寄存器，Ri为变址寄存器，S为比例因子。&lt;/p&gt;

&lt;p&gt;结构组成员的偏移量是在编译阶段确定的，结构体内部应满足每个元素的对齐要求，结构体的整体也应整齐存放，访问结构体数组中的元素根据汇编器给出的偏移量进行访问。&lt;/p&gt;

&lt;h4 id=&quot;控制转移&quot;&gt;控制转移&lt;/h4&gt;
&lt;p&gt;根据特定标志跳转：JZ/JNZ  JC/JNC JS/JNS  JO/JNO  JP/JNP JE/JNE  JCXZ  JECXZ&lt;/p&gt;

&lt;p&gt;无符号数比较：JA/JNA  JAE/JNAE  JB/JNB  JBE/JNBE&lt;br /&gt;
有符号数比较：JG/JNG  JGE/JNGE  JL/JNL  JLE/JNLE
直接跳转：jmp&lt;/p&gt;
&lt;h4 id=&quot;函数操作&quot;&gt;函数操作&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;参数传递&lt;/strong&gt;：在64位系统中，函数的前六个参数通过寄存器传递，从第七个参数开始使用栈传递。在32位系统中，函数参数使用栈传递。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;函数调用&lt;/strong&gt;：构建参数（移动到寄存器或压入栈中），将返回地址（call指令的下一条指令）压入栈中，然后调用call跳转到相应的函数。保存栈帧指针和被保存寄存器。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;函数返回&lt;/strong&gt;：恢复被保存的寄存器和栈帧指针，弹出返回地址并返回。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2018/12/29/FfnMsH.jpg&quot; alt=&quot;FfnMsH.jpg&quot; height=&quot;30%&quot; width=&quot;30%&quot; /&gt;&lt;img src=&quot;https://s1.ax1x.com/2018/12/29/Ffn3dI.jpg&quot; alt=&quot;Ffn3dI.jpg&quot; height=&quot;30%&quot; width=&quot;30%&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;汇编&quot;&gt;汇编&lt;/h1&gt;
&lt;h3 id=&quot;汇编的概念与作用&quot;&gt;汇编的概念与作用&lt;/h3&gt;
&lt;p&gt;汇编器as将hello.s翻译成机器语言指令，把这些指令打包成可重定位目标程序的格式，结果保存在二进制文件hello.o中。&lt;/p&gt;
&lt;h3 id=&quot;在ubuntu下汇编的命令&quot;&gt;在Ubuntu下汇编的命令&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;使用hello.c备注提供的命令：gcc -m64 -no-pie -fno-PIC hello.c -o hello
直接生成hello.o：gcc –o hello.o hello.c
使用汇编器as：as hello.s –o hello.o
使用hello.s文件汇编：gcc –c hello.s –o hello.o
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;可重定位目标elf格式&quot;&gt;可重定位目标elf格式&lt;/h3&gt;
&lt;p&gt;ELF可重定位目标文件如图所示，由ELF头、节头表和它们之间的节组成。
ELF可重定位目标文件包括以下内容：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2018/12/29/FfneJK.jpg&quot; alt=&quot;FfneJK.jpg&quot; height=&quot;40%&quot; width=&quot;40%&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ELF头&lt;/strong&gt;：
Magic：16字节的序列，描述了生成该文件的系统的字的大小和字节顺序
剩下部分包含帮助链接器语法分析和解释目标文件的信息。包括：ELF头大小、目标文件的类型、机器类型、节头表的文件偏移。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;.text&lt;/strong&gt;：已编译程序的机器代码
使用readelf查看内容，与objdump反汇编生成的机器码对比一致。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;.rodata&lt;/strong&gt;（只读代码段）：只读数据，如printf语句中的格式串和开关语句的跳转表&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;.data&lt;/strong&gt;：已初始化的全局和静态C变量
&lt;strong&gt;.bss&lt;/strong&gt;：未初始化的全局和静态C变量，以及所有被初始化为0的全局或静态变量。使用readelf查看hello.o的节头表中的.bss节的信息如下。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[ 4] .bss            	NOBITS           0000000000000000  000000c4
 0000000000000000	0000000000000000  WA       0     0     1
 （.bss的size为0）
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;.bss在目标文件中不占据实际的空间，仅仅是一个占位符。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;.symtab&lt;/strong&gt;：符号表，存放在程序中定义和引用的函数和全局变量的信息。在hello中调用的printf、sleep、exit、getchar都显示在此处。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;.rel.text&lt;/strong&gt;：.text节中位置的列表。当链接器把这个目标文件和其他文件组合时，需要修改这些位置。一般而言，任何调用外部函数或者引用全局变量的指令都需要修改。另一方面，调用本地函数的指令则不需要修改。在可执行文件中重定位信息通常被省略。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;.rel.data&lt;/strong&gt;：被模块引用或定义的所有全局变量的重定位信息。一般而言，任何已初始化的全局变量，如果它的初始值是一个全局变量的地址或者外部定义函数的地址，都需要被修改。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;.debug&lt;/strong&gt;：调试符号表，其条目是程序中定义的局部变量和类型定义，程序中定义和引用的全局变量，以及原始的C源文件。以-g选项调用编译器才能得到这张表。
&lt;strong&gt;.line&lt;/strong&gt;：原始C程序中的行号和.text节中的机器指令之间的映射，以-g选项调用编译器才能得到这张表。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;.strtab&lt;/strong&gt;：字符串表，包括.symtab和.debug节中的符号表，以及节头部中的节名字。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Section header table节头表&lt;/strong&gt;：描述不同节的位置和大小。&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;链接&quot;&gt;链接&lt;/h1&gt;
&lt;h3 id=&quot;链接的概念与作用&quot;&gt;链接的概念与作用&lt;/h3&gt;
&lt;p&gt;链接是将各种代码和数据片段收集并组合为一个单一文件的过程，这个文件可被加载到内存执行。链接可以执行于编译时、加载时、或运行时。在现代系统中，链接由链接器之行。&lt;/p&gt;

&lt;p&gt;链接使分离编译成为可能。不用将大型的应用程序组织为一个巨大的源文件，而是可以把它分解成更小更好管理的模块，可以独立地修改和编译这些模块。当改变模块中的一个时只需重新编译它并链接即可。&lt;/p&gt;
&lt;h3 id=&quot;在ubuntu下链接的命令&quot;&gt;在Ubuntu下链接的命令&lt;/h3&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ld -dynamic-linker /lib64/ld-linux-x86-64.so.2  /usr/lib/x86_64-linux-gnu/crt1.o /usr/lib/x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/5/crtbegin.o hello.o -lc /usr/lib/gcc/x86_64-linux-gnu/5/crtend.o /usr/lib/x86_64-linux-gnu/crtn.o -z relro -o hello ### 可执行目标文件hello的格式
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;可执行目标文件与可重定位目标文件类似。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ELF头&lt;/strong&gt;：描述文件的总体格式，包括程序的入口点。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;.text、.rodata、.data节&lt;/strong&gt;与可重定位目标文件相似，但它们已被重定位到他们最终的运行时的内存地址。&lt;/p&gt;

&lt;p&gt;因为可执行文件已被重定位，所以不再需要&lt;strong&gt;rel节&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;.init节&lt;/strong&gt;定义了一个函数_init，程序的初始代码会调用它。&lt;/p&gt;

&lt;h3 id=&quot;链接的重定位过程分析&quot;&gt;链接的重定位过程分析&lt;/h3&gt;
&lt;p&gt;hello.o	中只有.text段，其中仅包括main函数.而hello中有.init、.plt.got、.text、.fini 四段。&lt;/p&gt;

&lt;p&gt;.init 中包括_init、puts@plt、printf@plt、__libc_start_main@plt、getchar@plt、exit@plt、sleep@plt函数。&lt;/p&gt;

&lt;p&gt;.plt.got中包括.plt.got函数。&lt;/p&gt;

&lt;p&gt;.text中包括_start、deregister_tm_clones、register_tm_clones、__do_global_dtors_aux、frame_dummy、main、__libc_csu_init、__libc_csu_fini函数。&lt;/p&gt;

&lt;p&gt;.fini包括了_fini函数。&lt;/p&gt;

&lt;p&gt;由此可见在重定位过程中&lt;strong&gt;相同类型的节发生合并&lt;/strong&gt;，所以.text等节的内容发生了变化，增加了许多函数。除此之外重定义过程中还发生了重定位节中的符号引用，使每个符号指向正确的内存地址。内容如下：&lt;/p&gt;

&lt;p&gt;在hello.o反汇编文本中，可以看到je的跳转仍使用的是地址偏移量的形式，意思是跳转到与main偏移量为29的位置。callq的地址全是占位0，表明其未被重定位。
hello.o反汇编：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;0000000000000000 &amp;lt;main&amp;gt;:
……
  13:	74 14                	je     29 &amp;lt;main+0x29&amp;gt;
……
			16: R_X86_64_32	.rodata
  1a:	e8 00 00 00 00       	callq  1f &amp;lt;main+0x1f&amp;gt;
……
  29:	c7 45 fc 00 00 00 00  	movl   $0x0,-0x4(%rbp)
……
  55:	e8 00 00 00 00       	callq  5a &amp;lt;main+0x5a&amp;gt;
			56: R_X86_64_PC32  printf-0x4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;hello.o反汇编文本中出现了两种重定位类型：&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;R_X86_64_PC32&lt;/strong&gt;：重定位一个32位PC相对地址的引用&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;R_X86_64_32&lt;/strong&gt;：重定位一个32位PC绝对地址的引用&lt;/p&gt;

&lt;p&gt;56: R_X86_64_PC32 printf-0x4 
    告诉编译器修改开始于偏移量为0x56处的字符引用，使其在运行时指向printf函数。&lt;/p&gt;

&lt;p&gt;16: R_X86_64_32 .rodata 告诉编译器修改开始于偏移量为0x16处的字符引用，使其在运行时指向.rodata的第一个字节。&lt;/p&gt;

&lt;p&gt;在hello反汇编文本中，可以看到je的跳转有了确定的地址，与hello.o中对应跳转的条目一致。callq的地址也从0变为了偏移量fffffe50（补码），表示跳转到与call指令下一条指令偏移量为fffffe50的位置。&lt;/p&gt;

&lt;p&gt;hello反汇编：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;0000000000400646 &amp;lt;main&amp;gt;:
……
  400659:	74 14                	je     40066f &amp;lt;main+0x29&amp;gt;
……
400660:	e8 7b fe ff ff      	 	callq  4004e0 &amp;lt;puts@plt&amp;gt;
……
  40066f:	c7 45 fc 00 00 00 00  	movl   $0x0,-0x4(%rbp)
……
  40069b:	e8 50 fe ff ff        	callq  4004f0 &amp;lt;printf@plt&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;hello的执行流程&quot;&gt;hello的执行流程&lt;/h3&gt;
&lt;p&gt;shell为hello调用fork()生成子进程，以argv envp 为参数调用execve在子进程的上下文中加载新进程，execve调用加载器进行加载。通过虚拟地址空间中的页映射为可执行文件的片初始化代码段和数据段。最后加载器跳转到_start的地址。由_start开始依次进行函数调用：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;_start -&amp;gt; __libc_start_main -&amp;gt; __libc_csu_init -&amp;gt; _init -&amp;gt; main -&amp;gt; _fini.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;_start定义在系统目标文件ctrl.o中。_start调用系统启动函数__libc_start_main，__libc_start_main被定义在libc.so中，初始化执行环境。&lt;/p&gt;

&lt;hr /&gt;
&lt;h1 id=&quot;进程管理&quot;&gt;进程管理&lt;/h1&gt;
&lt;h3 id=&quot;进程的概念与作用&quot;&gt;进程的概念与作用&lt;/h3&gt;
&lt;p&gt;进程，是操作系统对一个正在运行的程序的一种抽象，是执行中程序的一个具体的实例。系统中每个程序都运行在&lt;strong&gt;上下文&lt;/strong&gt;中。
进程提供给应用程序两个关键的抽象：&lt;strong&gt;一个独立的逻辑控制流&lt;/strong&gt;和&lt;strong&gt;一个私有的地址空间&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&quot;shell-bash的作用与处理流程&quot;&gt;Shell-bash的作用与处理流程&lt;/h3&gt;
&lt;p&gt;Shell是一个用C语言编写的程序，它是用户使用Linux的桥梁。Shell既是一种命令语言，又是一种程序设计语言。它是一个交互性的应用级程序，它代表用户运行其他程序。&lt;/p&gt;

&lt;h4 id=&quot;作用&quot;&gt;作用&lt;/h4&gt;
&lt;p&gt;shell执行一系列的读/求值步骤，读步骤读取用户的命令行，求值步骤 解析命令，代表用户执行。&lt;/p&gt;

&lt;h4 id=&quot;处理流程&quot;&gt;处理流程&lt;/h4&gt;
&lt;ol&gt;
  &lt;li&gt;先调用&lt;code class=&quot;highlighter-rouge&quot;&gt;parseline&lt;/code&gt;函数，这个函数解析了以空格分隔的命令行参数，并构造最终会传递给&lt;code class=&quot;highlighter-rouge&quot;&gt;execve&lt;/code&gt;的 &lt;code class=&quot;highlighter-rouge&quot;&gt;argv&lt;/code&gt;向量。&lt;/li&gt;
  &lt;li&gt;第一个参数被假设为内置shell命令名或可执行文件，这时会解释这个命令或在一个新的子程序的上下文中加载并运行这个文件。&lt;/li&gt;
  &lt;li&gt;如果最后一个参数是‘&amp;amp;’字符，那么 &lt;code class=&quot;highlighter-rouge&quot;&gt;parseline&lt;/code&gt; 函数返回 1，表示应该在后台执行 程序，否则返回 0，表示应该在前台执行程序。&lt;/li&gt;
  &lt;li&gt;解析命令行之后，&lt;code class=&quot;highlighter-rouge&quot;&gt;eval&lt;/code&gt;函数调用&lt;code class=&quot;highlighter-rouge&quot;&gt;builtin_command&lt;/code&gt;函数，该函数检查第一个命令行参数是否为内置的shell命令。如果是，则立即解释，返回1，否则返回0。&lt;/li&gt;
  &lt;li&gt;如果&lt;code class=&quot;highlighter-rouge&quot;&gt;builtin_command&lt;/code&gt;函数返回0，那么shell创建一个子进程，在子进程中执 行所请求的程序。如果用户要求在后台运行程序，那么 shell 返回到循环的顶部，等待下一个命令的执行。否则shell使用&lt;code class=&quot;highlighter-rouge&quot;&gt;waitpid&lt;/code&gt;函数等待作业终止。当job终止时，shell开始下一轮迭代。&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;hello的fork进程创建过程&quot;&gt;Hello的fork进程创建过程&lt;/h3&gt;
&lt;p&gt;Hello进程通过调用fork函数创建其子进程。内核为Hello的子进程程创建各种数据结构，并分配给它一个唯一的PID。父进程和新创建的子进程之间最大的区别在于&lt;strong&gt;PID不同&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;为了给这个新进程创建虚拟内存，内核创建当前进程的mm_struct、区域结构和页表的原样副本。子进程与父进程用户级虚拟地址空间，如代码和数据段、堆、共享库和用户栈&lt;strong&gt;相同但相互独立&lt;/strong&gt;。子进程还获得与父进程任何打开文件描述符相同的副本，这意味着当父进程调用fork时，子进程可以读写父进程中打开的任何文件。&lt;/p&gt;

&lt;p&gt;fork函数&lt;strong&gt;调用一次，返回两次&lt;/strong&gt;。在父进程中fork返回子进程PID，在子进程中fork返回0。&lt;/p&gt;
&lt;h3 id=&quot;hello的execve过程&quot;&gt;Hello的execve过程&lt;/h3&gt;
&lt;p&gt;execve函数在当前进程的上下文中加载并运行一个新的程序，覆盖当前进程的地址空间。新进程与调用进程拥有&lt;strong&gt;相同的PID&lt;/strong&gt;。只有找不到可执行文件时execve才返回到调用程序。与fork不同，execve&lt;strong&gt;调用一次从不返回&lt;/strong&gt;。
当我们的hello进程调用execve函数加载运行其他程序时会发生以下变化：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;删除已存在的用户区域&lt;/li&gt;
  &lt;li&gt;映射私有区域&lt;/li&gt;
  &lt;li&gt;映射共享区域&lt;/li&gt;
  &lt;li&gt;设置程序计数器（PC），使之指向代码区域入口点&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;hello的进程执行&quot;&gt;Hello的进程执行&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;系统中的每个程序都运行在某个程序的上下文中。上下文就是程序正确运行需要的状态，包括内存中的程序的代码和数据、用户栈、内核栈、内核数据结构、通用目的寄存器的内容、程序计数器、环境变量以及打开文件描述符的集合。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;调度由内核中的调度器代码处理，即内核选择执行哪个进程的决策。在内核调度了一个新的进程运行后，它抢占当前进程，并使用上下文切换转移控制到新的进程。上下文切换保存当前进程的上下文，恢复先前被抢占的进程被保存的上下文，将控制传递给这个新恢复的进程。当内核代表用户执行系统调用时，可能会发生上下文切换。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2018/12/29/FfnDwn.jpg&quot; alt=&quot;FfnDwn.jpg&quot; height=&quot;70%&quot; width=&quot;80%&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;如因为等待某个时间发生阻塞时，内核可以选择让当前进程休眠，切换到另一个进程。sleep系统调用显式地请求让调用进程休眠。中断也可能引发上下文切换，如所有系统都有某种产生周期性定时器中断的机制。每次定时器中断时都切换到另一个进程。&lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;li&gt;当用户输入命令行运行程序hello时，shell创建hello进程，然后在这个新进程的上下文中运行可执行目标文件hello。&lt;/li&gt;
  &lt;li&gt;运行hello程序代码的进程初始在用户模式中，当hello进程遇到中断、故障或陷阱（系统调用）异常时控制将传递到异常处理程序，CPU将模式从用户模式切换为内核模式。异常处理程序在内核模式中运行，当它返回到应用程序代码时，CPU将模式从内核模式切换为用户模式。&lt;/li&gt;
  &lt;li&gt;如调用printf输出一条语句是由write通过产生陷阱使系统调用sys_call，把输出的任务移交给操作系统内核完成。hello中调用的sleep函数执行系统调用，显式地请求让调用进程休眠，切换到另一个进程。&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;hello的异常与信号处理&quot;&gt;hello的异常与信号处理&lt;/h3&gt;
&lt;p&gt;在hello的执行过程中可能会遇到以下异常：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;缺页故障&lt;/strong&gt;：调用缺页异常处理程序后可继续运行&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;I/O设备导致的中断&lt;/strong&gt;，如定时器芯片、ctrl+c等&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;陷阱&lt;/strong&gt;（即系统调用）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;hello中的printf调用write函数，write函数通过产生陷阱使系统调用sys_call，把输出的任务移交给操作系统内核完成。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;异常处理&lt;/strong&gt;：当hello进程遇到异常时控制将传递到异常处理程序，CPU将模式从用户模式切换为内核模式。异常处理程序在内核模式中运行，当它返回到应用程序代码时，CPU将模式从内核模式切换为用户模式。&lt;/p&gt;

&lt;p&gt;在hello的执行过程中可能会遇到以下信号：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;/bin/kill 程序&lt;/strong&gt;可以向另外的进程发送任意的信号&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;键盘发送信号&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;ctrl+c使内核发送SIGINT信号到前台进程组的每个进程&lt;/li&gt;
      &lt;li&gt;ctrl+z发送一个SIGSTP到前台进程组的每个进程&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;信号处理&lt;/strong&gt;：当进程hello从内核模式切换到用户模式时，内核会检查进程hello是否存在未被阻塞的待处理信号，如果不存在待处理信号则继续执行下一条指令，否则选择待处理信号中id最小（意味着最重要）的信号强制hello接受， SIGINT使进程终止，SIGTSTP使进程挂起直到被重启。&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;hello的存储管理&quot;&gt;hello的存储管理&lt;/h1&gt;
&lt;h3 id=&quot;hello的存储器地址空间&quot;&gt;hello的存储器地址空间&lt;/h3&gt;
&lt;p&gt;主存被组织成一个连续的字节大小的单元组成的数组，每个字节都有一个唯一的&lt;strong&gt;物理地址&lt;/strong&gt;。与之对应，&lt;strong&gt;虚拟内存&lt;/strong&gt;被组织成一个存放在磁盘上连续的字节大小的单元组成的数组，每个字节都有一个唯一的虚拟地址。而我们之前看到的机器语言指令中出现的内存地址，都是&lt;strong&gt;逻辑地址&lt;/strong&gt;。&lt;strong&gt;线性地址&lt;/strong&gt;是逻辑地址到物理地址变换之间的中间层，逻辑地址需要转换成线性地址，再经过MMU转换成物理地址才能够被访问到。
&lt;img src=&quot;https://s1.ax1x.com/2018/12/29/FfnnzD.jpg&quot; alt=&quot;FfnnzD.jpg&quot; height=&quot;70%&quot; width=&quot;90%&quot; /&gt;&lt;/p&gt;
&lt;h3 id=&quot;intel逻辑地址到线性地址的变换-段式管理&quot;&gt;Intel逻辑地址到线性地址的变换-段式管理&lt;/h3&gt;

&lt;p&gt;先简单介绍一下Linux虚拟内存系统。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2018/12/29/FfnKQe.jpg&quot; alt=&quot;FfnKQe.jpg&quot; height=&quot;30%&quot; width=&quot;35%&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Linux将虚拟内存组织成一些段的集合去管理，图展示了一个Linux进程的虚拟内存，由内核代码段、内核数据段、用户代码段、用户数据段等组成。&lt;/p&gt;

&lt;p&gt;逻辑地址相当于数据段内的偏移，故逻辑地址加上隐含的数据段的基地址，才能构成线性地址。数据段即图展示的内核代码段、内核数据段、用户代码段、用户数据段等。因为Linux所有的段（用户代码段、用户数据段、内核代码段、内核数据段）的线性地址都是从 0x00000000 开始，长度4G，所以逻辑地址等于线性地址。
&lt;img src=&quot;https://s1.ax1x.com/2018/12/29/Ffnroq.jpg&quot; alt=&quot;Ffnroq.jpg&quot; /&gt;&lt;/p&gt;
&lt;h3 id=&quot;hello的线性地址到物理地址的变换-页式管理&quot;&gt;Hello的线性地址到物理地址的变换-页式管理&lt;/h3&gt;

&lt;p&gt;物理内存被分割为一个个&lt;strong&gt;物理页&lt;/strong&gt;进行管理。线性地址通过&lt;strong&gt;页表&lt;/strong&gt;查找来对应物理地址。&lt;strong&gt;页表将虚拟页地址映射到物理页地址&lt;/strong&gt;，标记着某个虚拟页是否存放，存在的话在DRAM中的哪个地方，否则在物理内存中选择一个牺牲页，将虚拟页复制到DRAM中，替换这个牺牲页。CPU将线性地址传入MMU将其转换为物理地址的过程称为&lt;strong&gt;地址翻译&lt;/strong&gt;。地址翻译总体来说具有以下几个步骤：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2018/12/29/FfnmRO.jpg&quot; alt=&quot;FfnmRO.jpg&quot; height=&quot;50%&quot; width=&quot;60%&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;CPU生成VA将其传给MMU&lt;/li&gt;
  &lt;li&gt;MMU使用页表生成PTE地址，从cache／main memory中请求PTE&lt;/li&gt;
  &lt;li&gt;cache／main memory向MMU返回PTE&lt;/li&gt;
  &lt;li&gt;MMU构造PA并传送到cache／main memory
    &lt;ul&gt;
      &lt;li&gt;MMU以VPN作为选择PTE的索引，因为物理页与虚拟页都是P字节的，所以他们的偏移量PPO与VPO一致，将PPN与VPO串联起来就得到了相应的PA。如果有效位为0，触发缺页异常处理程序。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;cache／main memory返回所请求的字段给CPU
其中第三步返回的PTE可能有效值为0，触发缺页异常处理程序，将虚拟页面缓存在物理内存中后重新进行地址翻译。&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;tlb与四级页表支持下的va到pa的变换&quot;&gt;TLB与四级页表支持下的VA到PA的变换&lt;/h3&gt;

&lt;p&gt;为了减少MMU查询PTE的开销，TLB应运而生。TLB就是MMU中PTE的缓存。它将VA中的VPN分为两部分，一部分作为TLB的标记，另一部分作为TLB的索引。当TLB不命中时，MMU从L1缓存中取出相应的PTE放在TLB中。这样一来命中的话地址翻译都在MMU上执行，效率非常高。TLB命中与不命中的地址翻译情况如图&lt;/p&gt;

&lt;p&gt;由于页表是需要常驻内存的，为了减少内存被占用的程序可以使用多级页表。Intel Core i7使用四级页表减少主存压力。上一级页表映射下一级虚拟地址空间的一片（有点类似数据结构中建立层索引）。所以VPN被分为四份，VPN i储存着一个到第i级页表的索引，只有最后一级页表中存放PPN。
&lt;img src=&quot;https://s1.ax1x.com/2018/12/29/FfnBes.jpg&quot; alt=&quot;FfnBes.jpg&quot; height=&quot;40%&quot; width=&quot;80%&quot; /&gt;&lt;/p&gt;
&lt;h3 id=&quot;三级cache支持下的物理内存访问&quot;&gt;三级Cache支持下的物理内存访问&lt;/h3&gt;

&lt;p&gt;局部性原理启示着高速缓存的思想：用更小更快的设备作为更大更慢设备的缓存区。由于寄存器和主存之间效率非常悬殊，直接访问效率非常低，现代的CPU设计中会在寄存器和CPU间建立多层缓存，数据以块为单元在层与层间复制，这样既可以降低成本又可以保证效率。图为Intel Core i7的高速缓存层次结构。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2018/12/29/Ffn8ot.jpg&quot; alt=&quot;Ffn8ot.jpg&quot; height=&quot;80%&quot; width=&quot;60%&quot; /&gt;
当CPU需要向主存请求一块数据时，优先向cache中L1发送请求，若请求的块正好在L1中，则命中，否则向下一层L2继续请求块，直到请求成功。&lt;/p&gt;
&lt;h3 id=&quot;hello进程fork时的内存映射&quot;&gt;hello进程fork时的内存映射&lt;/h3&gt;
&lt;p&gt;当hello进程调用fork时，内核为hello的子进程程创建各种数据结构，并分配给它一个唯一的PID。为了给这个新进程创建虚拟内存，内核创建当前进程的mm_struct、区域结构和页表的原样副本。它将两个进程中的每个页面都标记为只读，并将两个进程中的每个区域结构都标记为私有的写时复制。
当fork在hello的子进程中返回时，新进程现在的虚拟内存刚好和调用fork时存在的虚拟内存相同。当这两个进程中的任一个进行写操作时，写时复制机制就会创建新页面。因此虚拟内存为hello的父进程和子进程保持私有地址空间的抽象概念。&lt;/p&gt;
&lt;h3 id=&quot;hello进程execve时的内存映射&quot;&gt;hello进程execve时的内存映射&lt;/h3&gt;
&lt;p&gt;当我们的hello进程调用execve函数加载运行其他程序时会发生以下变化：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;删除已存在的用户区域&lt;/li&gt;
  &lt;li&gt;映射私有区域&lt;/li&gt;
  &lt;li&gt;映射共享区域&lt;/li&gt;
  &lt;li&gt;设置程序计数器（PC），使之指向代码区域入口点&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;缺页故障与缺页中断处理&quot;&gt;缺页故障与缺页中断处理&lt;/h3&gt;
&lt;p&gt;我们以图7-3-1中的页表为例说明缺页中断处理操作。MME向cache／main memory请求得到的PTE 3有效位为0，此刻发生Page Fault故障，触发缺页异常处理程序，将虚拟页面缓存在物理内存中后重新进行地址翻译。&lt;/p&gt;

&lt;p&gt;内核中的缺页异常处理程序首先检查虚拟地址是否合法、若不合法则触发段错误。然后检查试图进行的内存访问是否合法，若不合法则触发保护异常，通过后则在物理内存中选取一个牺牲页PP3，若VP4已被修改，则内核将其复制回磁盘（写回）。然后修改页表中VP4的页表条目，表明VP4已不再缓存在内存中。在此之后内核从磁盘复制VP3到内存中的PP3，更新PTE3后返回。当缺页异常处理程序返回时它重新启动导致缺页故障的指令，由于此时缺页故障已被修复，所以地址翻译可以继续正常处理了。&lt;/p&gt;
&lt;h3 id=&quot;动态存储分配管理&quot;&gt;动态存储分配管理&lt;/h3&gt;
&lt;p&gt;由于在某些情况下只有在程序运行之后才知道某些数据结构的大小，所以程序往往使用动态内存分配动态分配数组。&lt;/p&gt;

&lt;h3 id=&quot;动态内存管理的基本方法&quot;&gt;动态内存管理的基本方法&lt;/h3&gt;
&lt;p&gt;C语言使用动态内存分配器维护堆。分配器将堆视为一组不同大小的块的集合来维护。每个块是一个连续的chunk，分为已分配和未分配两种状态。已分配的块显式地保留给应用程序使用，保持已分配状态，直到被应用程序显式地释放或被内存分配器自身隐式释放。未被分配的块保持空闲直到它显式地被应用所分配。&lt;/p&gt;
&lt;h3 id=&quot;动态内存管理的策略&quot;&gt;动态内存管理的策略&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;在执行malloc或free操作前先初始化堆。&lt;/li&gt;
  &lt;li&gt;当进程动态申请内存时先调整块的大小进行对齐，分配器再优先检查是否有大小合适的空闲块，如果有则放置请求块，并且根据需要将空闲块选择性做分割处理，否则在堆上扩展内存或回收垃圾。&lt;/li&gt;
  &lt;li&gt;当进程请求释放内存时检查释放块的周围是否有空闲块，如果有则将其合并&lt;/li&gt;
  &lt;li&gt;使用分配器应解决以下问题：
    &lt;ul&gt;
      &lt;li&gt;空闲块组织&lt;/li&gt;
      &lt;li&gt;放置策略&lt;/li&gt;
      &lt;li&gt;分割空闲块&lt;/li&gt;
      &lt;li&gt;合并空闲块&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;空闲块组织方式&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;隐式空闲链表&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;根据这种方式可以使分配器像链表一样遍历所有的块从而间接遍历整个空闲块的集合。通过在最后设置已分配而大小为0的块来标志结束。
&lt;img src=&quot;https://s1.ax1x.com/2018/12/29/Ffn1eA.jpg&quot; alt=&quot;Ffn1eA.jpg&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;显式空闲链表&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;将堆组织成一个双向空闲链表，如果未被分配的话有效载荷的位置包含一个指向前驱的指针和一个指向后继的指针。可以使用地址顺序或LIFO的方法维护链表中空闲块的顺序。&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://s1.ax1x.com/2018/12/29/Ffeou9.jpg&quot; alt=&quot;image&quot; height=&quot;80%&quot; width=&quot;85%&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;分离的空闲链表
    &lt;ul&gt;
      &lt;li&gt;按照大小分类，构造不同大小的空闲列表&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;块按地址大小排序
    &lt;ul&gt;
      &lt;li&gt;在每个空闲块中使用一个带指针的平衡树，使用块大小作为权值&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;放置策略&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;首次适配：从头开始扫描寻找第一个合适的空闲块&lt;/li&gt;
  &lt;li&gt;下一次适配：从上次查询的结束的地方开始&lt;/li&gt;
  &lt;li&gt;最佳适配：检查每个空闲块，根据需求选择大小最小的空闲块。如果空闲块大于需求，则分割空闲块。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;分割空闲块&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;如果空闲块大于需求，则将空闲块分为已利用和未利用两部分。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;合并空闲块&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;立即合并&lt;/li&gt;
  &lt;li&gt;推迟合并(常见)&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;hello的io管理&quot;&gt;hello的IO管理&lt;/h1&gt;
&lt;h3 id=&quot;linux的io设备管理方法&quot;&gt;Linux的IO设备管理方法&lt;/h3&gt;
&lt;p&gt;在Linux中，所有的I/O设备都被模型化为文件，所有的输入和输出都被当作对相应的文件的读和写来执行。这种将设备映射为文件的方式允许Linux内核引出一个简单、低级的应用接口，称为UnixI/O，这使得所有的输入和输出都能以一种统一且一致的方式来执行。&lt;/p&gt;
&lt;h3 id=&quot;unix-io接口及其函数&quot;&gt;Unix I/O接口及其函数&lt;/h3&gt;
&lt;p&gt;Unix I/O 是系统引出的一个简单、低级的应用接口，用来辅助主存和外部设备之间复制数据，使所有输入输出的方式以同一且一致的方式运行。&lt;/p&gt;

&lt;h3 id=&quot;unix-io-函数主要包括&quot;&gt;Unix I/O 函数主要包括：&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;read 和 write —— 读写函数&lt;/li&gt;
  &lt;li&gt;lseek —— 随机访问文件&lt;/li&gt;
  &lt;li&gt;open 和 close —— 打开关闭文件&lt;/li&gt;
  &lt;li&gt;stat —— 检索文件信息&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;printf的实现分析&quot;&gt;printf的实现分析&lt;/h4&gt;
&lt;p&gt;printf是标准IO函数提供的一个更加完整的带缓冲的替代品。查看printf的源码分析其实现：&lt;/p&gt;

&lt;p&gt;声明了256字节的数组buf作为缓存区—&amp;gt;取出第一个参数—&amp;gt;调用vsprintf函数—&amp;gt;调用write函数—&amp;gt;返回vsprintf的返回值。其中((char*)(&amp;amp;fmt) + 4)表示的是printf函数的第一个参数。
vsprintf的作用是格式化。它接受确定输出格式的格式字符串fmt。用格式字符串对个数变化的参数进行格式化，产生格式化输出。返回的是要打印出来的字符串的长度。&lt;/p&gt;

&lt;p&gt;write为Unix I/O函数，查看write函数的反汇编代码：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; mov eax, _NR_write 
 mov ebx, [esp + 4] 
 mov ecx, [esp + 8] 
 int INT_VECTOR_SYS_CALL
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;前三行即参数传递，第四行表示要调用中断门。通过中断门来实现特定的系统服务。int INT_VECTOR_SYS_CALL表示要通过系统来调用sys_call这个函数。也就是说write通过产生陷阱使系统调用sys_call，把输出的任务移交给操作系统内核完成。&lt;/p&gt;

&lt;p&gt;在此之后字符显示驱动子程序：从ASCII到字模库到显示vram（存储每一个点的RGB颜色信息）。显示芯片按照刷新频率逐行读取vram，并通过信号线向液晶显示器传输每一个点（RGB分量）。&lt;/p&gt;

&lt;h3 id=&quot;getchar的实现分析&quot;&gt;getchar的实现分析&lt;/h3&gt;
&lt;p&gt;来自I/O设备的信号导致异步异常——键盘中断，触发中断处理程序：键盘中断处理子程序，它接受按键扫描码转成ascii码，保存到系统的键盘缓冲区。
getchar等调用read系统函数，通过系统调用读取按键ascii码，直到接受到回车键才返回。当我们按下回车键时，就开始调用getchar()函数，把缓冲区最先存储的字符读取，并且把这个字符从缓冲区中清除。然后利用循环继续读取，释放。&lt;/p&gt;
&lt;h3 id=&quot;本章小结&quot;&gt;本章小结&lt;/h3&gt;
&lt;p&gt;Linux中将设备的模型化为文件， 使用Unix I/O接口进行设备管理。Linux提供了少量的基于Unix I/O 模型的系统级函数，它们允许应用程序打开、关闭、读写文件、提取文件的元数据和IO重定向。Linux读和写操作会出现不足值，应用程序必须能正确的预计并处理这种情况。应用程序不应直接调用UnixI/O函数，而是应该使用RIO函数包，RIO通过反复执行读写操作，直到传送完所有的请求数据，自动处理不足值。&lt;/p&gt;

&lt;p&gt;标准I/O库是基于UnixI/O实现的，并提供了一组强大的高级I/O例程。对于绝大多数应用程序而言，标准I/O比更简单，对于网络应用程序来说Unix I/O更胜一筹。&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;总结&quot;&gt;总结&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;我们的hello.c代码经过预处理、编译、汇编、链接四个阶段的加工，从代码一步步转变为汇编语言、机器语言、二进制文本，最后成为可执行文件，也就是我们的程序——hello。&lt;/li&gt;
  &lt;li&gt;当我们在shell 中输入命令行执行hello后，shell为hello创建一个新的子进程，并在子进程中调用execve来加载并执行该进程。执行结束后shell回收hello进程。&lt;/li&gt;
  &lt;li&gt;当hello调用printf时产生系统调用，进行上下文切换，从用户模式切换至内核模式，通过 I/O流向屏幕输出一行字符。每输出一次将休眠一段时间，直至输出10次。接着getchar函数会从输入缓冲区读取一个字符，然后执行return 0指令结束程序的执行。在进程运行的过程中，可以发送信号至进程使其停止或终止。&lt;/li&gt;
  &lt;li&gt;在这个过程中，我们认识了CPU如何处理hello中的指令序列；访问内存过程中的VA和PA怎样进行相互转换；TLB、四级页表为什么可以加快地址翻译；缺页中断如何处理；三级cache的访问方式。&lt;/li&gt;
  &lt;li&gt;从分析过程中可以进一步加深对P2P，O2O、计算机系统的理解，从而写出更好的程序。&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Thu, 20 Dec 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/coding/chengxurensheng.html</link>
        <guid isPermaLink="true">http://localhost:4000/coding/chengxurensheng.html</guid>
        
        <category>CSAPP</category>
        
        <category>PROGRAM</category>
        
        <category>PROCESS</category>
        
        
        <category>coding</category>
        
      </item>
    
      <item>
        <title>Welcome to Nice Blog</title>
        <description>&lt;h2 id=&quot;welcome&quot;&gt;Welcome&lt;/h2&gt;

&lt;p&gt;I think many blog themes are over designed, so I created this one.&lt;/p&gt;

&lt;p&gt;Just for using, not showing off.&lt;/p&gt;

&lt;h2 id=&quot;nice-blog&quot;&gt;Nice Blog&lt;/h2&gt;

&lt;p&gt;A Simple Jekyll Blog Theme.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://gabriel-chen.github.io/Nice_Blog&quot;&gt;Demo&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/BrmOMmv.png&quot; alt=&quot;index-page&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Introduce yourself in &lt;code class=&quot;highlighter-rouge&quot;&gt;About&lt;/code&gt; page  :
&lt;img src=&quot;https://i.imgur.com/vRGFclV.png&quot; alt=&quot;about-page&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And you can turn on or off your skills tree in &lt;code class=&quot;highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; :&lt;br /&gt;
&lt;img src=&quot;https://i.imgur.com/ssSOj57.png&quot; alt=&quot;skills-tree&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Posts will be listed by years in &lt;code class=&quot;highlighter-rouge&quot;&gt;Archive&lt;/code&gt; page:&lt;br /&gt;
&lt;img src=&quot;https://i.imgur.com/8bQZtkD.png&quot; alt=&quot;archive-page&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Post will be listed by categories in &lt;code class=&quot;highlighter-rouge&quot;&gt;Category&lt;/code&gt; page:&lt;br /&gt;
&lt;img src=&quot;https://i.imgur.com/cRHuAWi.png&quot; alt=&quot;category-page&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Post will be listed by tags in &lt;code class=&quot;highlighter-rouge&quot;&gt;Tags&lt;/code&gt; page:&lt;br /&gt;
&lt;img src=&quot;https://i.imgur.com/pnRdDD0.png&quot; alt=&quot;tags-page&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You can put your &lt;code class=&quot;highlighter-rouge&quot;&gt;PGP&lt;/code&gt; publickey in &lt;code class=&quot;highlighter-rouge&quot;&gt;Contact&lt;/code&gt; page:&lt;br /&gt;
&lt;img src=&quot;https://i.imgur.com/8wHb5lX.png&quot; alt=&quot;contact-page&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Now you have a &lt;code class=&quot;highlighter-rouge&quot;&gt;404&lt;/code&gt; page and it will jump back to &lt;code class=&quot;highlighter-rouge&quot;&gt;index&lt;/code&gt; page itself:&lt;br /&gt;
&lt;img src=&quot;https://i.imgur.com/mtkM64q.png&quot; alt=&quot;404-page&quot; /&gt;&lt;/p&gt;

&lt;p&gt;If you add &lt;code class=&quot;highlighter-rouge&quot;&gt;finshed: true&lt;/code&gt; in your post header, then an &lt;code class=&quot;highlighter-rouge&quot;&gt;EOF&lt;/code&gt; container will show under your post like this:&lt;/p&gt;
&lt;div class=&quot;eof&quot;&gt;&lt;/div&gt;

&lt;p&gt;Or it will show &lt;code class=&quot;highlighter-rouge&quot;&gt;TBC&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;tbc&quot;&gt;&lt;/div&gt;

&lt;h2 id=&quot;how-to-use&quot;&gt;How to use&lt;/h2&gt;

&lt;p&gt;Star it, fork it, and download it.&lt;/p&gt;

&lt;p&gt;Change the settings in &lt;code class=&quot;highlighter-rouge&quot;&gt;_config.yml&lt;/code&gt; file and then you can use this theme.&lt;/p&gt;

&lt;p&gt;Then change whatever you want. But first, you should know what you are doing.&lt;/p&gt;

&lt;p&gt;If you messed it up, do not worry, just come back and clone it again.&lt;/p&gt;

&lt;p&gt;Have fun.&lt;/p&gt;

&lt;h2 id=&quot;author&quot;&gt;Author&lt;/h2&gt;

&lt;p&gt;A normal person just wanna see this world.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://gabriel-chen.github.io&quot;&gt;Gabriel&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;license&quot;&gt;License&lt;/h2&gt;

&lt;p&gt;Use MIT License.&lt;/p&gt;
</description>
        <pubDate>Wed, 30 Mar 2016 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/jekyll/welcome.html</link>
        <guid isPermaLink="true">http://localhost:4000/jekyll/welcome.html</guid>
        
        <category>jekyll</category>
        
        <category>github</category>
        
        <category>blog</category>
        
        
        <category>Jekyll</category>
        
      </item>
    
      <item>
        <title>Markdown Gramma</title>
        <description>&lt;h2 id=&quot;heading&quot;&gt;Heading&lt;/h2&gt;

&lt;p&gt;Heading is really simple in Markdown, you can use &lt;code class=&quot;highlighter-rouge&quot;&gt;#&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;=&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;-&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Like this:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;# H1. Heading&lt;/code&gt;&lt;/p&gt;

&lt;h1 id=&quot;h1-heading&quot;&gt;H1. Heading&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;## H2. Heading&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;h2-heading&quot;&gt;H2. Heading&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;### H3. Heading&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;h3-heading&quot;&gt;H3. Heading&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;#### H4. Heading&lt;/code&gt;&lt;/p&gt;

&lt;h4 id=&quot;h4-heading&quot;&gt;H4. Heading&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;##### H5. Heading&lt;/code&gt;&lt;/p&gt;

&lt;h5 id=&quot;h5-heading&quot;&gt;H5. Heading&lt;/h5&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;###### H6. Heading&lt;/code&gt;&lt;/p&gt;

&lt;h6 id=&quot;h6-heading&quot;&gt;H6. Heading&lt;/h6&gt;

&lt;p&gt;And like this:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-md&quot; data-lang=&quot;md&quot;&gt;Heading
======&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h1 id=&quot;heading-1&quot;&gt;Heading&lt;/h1&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-md&quot; data-lang=&quot;md&quot;&gt;Heading
&lt;span class=&quot;p&quot;&gt;-------&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;heading-2&quot;&gt;Heading&lt;/h2&gt;

&lt;p&gt;See? Really easy.&lt;/p&gt;

&lt;h2 id=&quot;font&quot;&gt;Font&lt;/h2&gt;

&lt;p&gt;There are three kinds of font in Markdown.&lt;/p&gt;

&lt;h3 id=&quot;italic&quot;&gt;Italic：&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;*Italic*&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Italic&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;_Italic_&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Italic&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&quot;bold&quot;&gt;Bold：&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;**Bold**&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Bold&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;__Bold__&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Bold&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;italic--bold&quot;&gt;Italic &amp;amp; Bold：&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;***Italic &amp;amp; Bold***&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Italic &amp;amp; Bold&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;___Italic &amp;amp; Bold___&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Italic &amp;amp; Bold&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;You can also do this:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;**Markdown is _fun_**&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Markdown is &lt;em&gt;fun&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;list&quot;&gt;List&lt;/h2&gt;

&lt;h3 id=&quot;ordered-list&quot;&gt;Ordered list:&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;1. 2. 3. &lt;/code&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;First&lt;/li&gt;
  &lt;li&gt;Second&lt;/li&gt;
  &lt;li&gt;Third&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;unordered-list&quot;&gt;Unordered list:&lt;/h3&gt;

&lt;p&gt;There are three ways to make an unordered list:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;* AAA&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;AAA&lt;/li&gt;
  &lt;li&gt;BBB&lt;/li&gt;
  &lt;li&gt;CCC&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;- AAA&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;AAA&lt;/li&gt;
  &lt;li&gt;BBB&lt;/li&gt;
  &lt;li&gt;CCC&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;+ AAA&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;AAA&lt;/li&gt;
  &lt;li&gt;BBB&lt;/li&gt;
  &lt;li&gt;CCC&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;block-quote&quot;&gt;Block quote&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;gt; War is Peace&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;gt; Freedom is Slavery&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;gt; Ignorance is Strength&lt;/code&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;War is Peace&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;Freedom is Slavery&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;Ignorance is Strength&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;You can also do this:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;gt; * War is Peace&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;gt; * Freedom is Slavery&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;gt; * Ignorance is Stength&lt;/code&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;War is Peace&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;Freedom is Slavery&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;Ignorance is Stength&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;link&quot;&gt;Link&lt;/h2&gt;

&lt;h3 id=&quot;simple-link&quot;&gt;Simple link&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;http://itisbenjamin.github.io&amp;gt;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://itisbenjamin.github.io&quot;&gt;http://itisbenjamin.github.io&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can also do this when you insert an email address.&lt;/p&gt;

&lt;h3 id=&quot;link-1&quot;&gt;Link&lt;/h3&gt;

&lt;p&gt;You can add your link just behind your words:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[Ben](www.itisbenjamin.github.io)&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;www.itisbenjamin.github.io&quot;&gt;Ben&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And you can also do it like this:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[about this link][1]&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Then put this line at anywhere you want in your post:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[1]: link address&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;link-description&quot;&gt;Link description&lt;/h3&gt;

&lt;p&gt;Add the link description behind the link address like this:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[Ben](www.itisbenjamin.github.io &quot;Ben&quot;)&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;www.itisbenjamin.github.io&quot; title=&quot;Ben&quot;&gt;Ben&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;image&quot;&gt;Image&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;![Codes](/img/code.png)&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/code.png&quot; alt=&quot;Codes&quot; /&gt;&lt;/p&gt;

&lt;p&gt;How to write the images’ descriptions are the same way as how you do it in links:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;![Codes](/img/code.png &quot;Codes&quot;)&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/code.png&quot; alt=&quot;Codes&quot; title=&quot;Codes&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;code&quot;&gt;Code&lt;/h2&gt;

&lt;p&gt;You can use &lt;code&gt;``&lt;/code&gt; to show your codes:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;`.default`&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;.default&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;If you wanna show a piece of codes, use 4 spaces or 1 tab.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;post-header-container&amp;gt;
  &amp;lt;div class=&quot;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;scrim&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;header&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;post-header&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;h1&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Markdown Gramma&lt;span class=&quot;nt&quot;&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;info&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;by &lt;span class=&quot;nt&quot;&gt;&amp;lt;strong&amp;gt;&lt;/span&gt;Gabriel&lt;span class=&quot;nt&quot;&gt;&amp;lt;/strong&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/header&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;others&quot;&gt;Others&lt;/h2&gt;

&lt;h3 id=&quot;breaker&quot;&gt;Breaker&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;---&lt;/code&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;***&lt;/code&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;- - - -&lt;/code&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;They all show a breaker.&lt;/p&gt;

&lt;h2 id=&quot;footnote&quot;&gt;Footnote&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Something needs a footnote[^1].&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[^1]: This is a footnote.&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Something needs a footnote&lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;

&lt;p&gt;Then this footnote will show at the end of this post.&lt;/p&gt;

&lt;h2 id=&quot;delete&quot;&gt;Delete&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;~~There is no tree waiting for me.~~&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;There is no tree waiting for me.&lt;/del&gt;&lt;/p&gt;

&lt;h2 id=&quot;table&quot;&gt;Table&lt;/h2&gt;

&lt;h3 id=&quot;a-simple-way&quot;&gt;A simple way&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;A     | B     | C     | D &lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;----- | ----- | ----- | -----&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;a     | b     | c     | d&lt;/code&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;A&lt;/th&gt;
      &lt;th&gt;B&lt;/th&gt;
      &lt;th&gt;C&lt;/th&gt;
      &lt;th&gt;D&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;a&lt;/td&gt;
      &lt;td&gt;b&lt;/td&gt;
      &lt;td&gt;c&lt;/td&gt;
      &lt;td&gt;d&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;make-words-at-left-center-or-right&quot;&gt;Make words at left, center or right&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;left      | center       | center       | right&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;:-------- | :----------: | :----------: | -----:&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;a         | b            | c            | d&lt;/code&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;left&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;center&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;center&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;right&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;a&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;b&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;c&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;d&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;div class=&quot;footnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot;&gt;
      &lt;p&gt;This is a footnote. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        <pubDate>Tue, 29 Mar 2016 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/coding/markdown.html</link>
        <guid isPermaLink="true">http://localhost:4000/coding/markdown.html</guid>
        
        <category>code</category>
        
        <category>markdown</category>
        
        <category>github</category>
        
        
        <category>coding</category>
        
      </item>
    
      <item>
        <title>阿Q正傳 (Traditional Chinese)</title>
        <description>&lt;h2 id=&quot;第一章序&quot;&gt;第一章　序&lt;/h2&gt;

&lt;p&gt;我要給阿Ｑ做正傳，已經不止一兩年了。但一面要做，一面又往回想，這足見我不是一個「立言」的人，因為從來不朽之筆，須傳不朽之人，於是人以文傳，文以人傳——究竟誰靠誰傳，漸漸的不甚瞭然起來，而終於歸接到傳阿Ｑ，彷彿思想裡有鬼似的。&lt;/p&gt;

&lt;p&gt;然而要做這一篇速朽的文章，才下筆，便感到萬分的困難了。第一是文章的名目。孔子曰，「名不正則言不順」。這原是應該極註意的。傳的名目很繁多：列傳，自傳，內傳，外傳，別傳，家傳，小傳……，而可惜都不合。「列傳」麽，這一篇並非和許多闊人排在「正史」裡；「自傳」麽，我又並非就是阿Ｑ。說是「外傳」，「內傳」在那裡呢？倘用「內傳」，阿Ｑ又決不是神仙。「別傳」呢，阿Ｑ實在未曾有大總統上諭宣付國史館立「本傳」——雖說英國正史上並無「博徒列傳」，而文豪迭更司也做過《博徒別傳》這一部書，但文豪則可，在我輩卻不可。其次是「家傳」，則我既不知與阿Ｑ是否同宗，也未曾受他子孫的拜託；或「小傳」，則阿Ｑ又更無別的「大傳」了。總而言之，這一篇也便是「本傳」，但從我的文章著想，因為文體卑下，是「引車賣漿者流」所用的話，所以不敢僭稱，便從不入三教九流的小說家所謂「閑話休題言歸正傳」這一句套話裡，取出「正傳」兩個字來，作為名目，即使與古人所撰《書法正傳》的「正傳」字面上很相混，也顧不得了。&lt;/p&gt;

&lt;p&gt;第二，立傳的通例，開首大抵該是「某，字某，某地人也」，而我並不知道阿Ｑ姓什麼。有一回，他似乎是姓趙，但第二日便模糊了。那是趙太爺的兒子進了秀才的時候，鑼聲鏜鏜的報到村裡來，阿Ｑ正喝了兩碗黃酒，便手舞足蹈的說，這於他也很光採，因為他和趙太爺原來是本家，細細的排起來他還比秀才長三輩呢。其時幾個旁聽人倒也肅然的有些起敬了。那知道第二天，地保便叫阿Ｑ到趙太爺家裡去；太爺一見，滿臉濺朱，喝道：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;「阿Ｑ，你這渾小子！你說我是你的本家麽？」
&lt;br /&gt;阿Ｑ不開口。
&lt;br /&gt;趙太爺愈看愈生氣了，搶進幾步說：「你敢胡說！我怎麼會有你這樣的本家？你姓趙麽？」
&lt;br /&gt;阿Ｑ不開口，想往後退了；趙太爺跳過去，給了他一個嘴巴。
&lt;br /&gt;「你怎麼會姓趙！——你那裡配姓趙！」&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;阿Ｑ並沒有抗辯他確鑿姓趙，只用手摸著左頰，和地保退出去了；外面又被地保訓斥了一番，謝了地保二百文酒錢。知道的人都說阿Ｑ太荒唐，自己去招打；他大約未必姓趙，即使真姓趙，有趙太爺在這裡，也不該如此胡說的。此後便再沒有人提起他的氏族來，所以我終於不知道阿Ｑ究竟什麼姓。&lt;/p&gt;

&lt;p&gt;第三，我又不知道阿Ｑ的名字是怎麼寫的。他活著的時候，人都叫他阿Ｑｕｅｉ，死了以後，便沒有一個人再叫阿Ｑｕｅｉ了，那裡還會有「著之竹帛」的事。若論「著之竹帛」，這篇文章要算第一次，所以先遇著了這第一個難關。我曾仔細想：阿Ｑｕｅｉ，阿桂還是阿貴呢？倘使他號月亭，或者在八月間做過生日，那一定是阿桂了；而他既沒有號——也許有號，只是沒有人知道他，——又未嘗散過生日徵文的帖子：寫作阿桂，是武斷的。又倘使他有一位老兄或令弟叫阿富，那一定是阿貴了；而他又只是一個人：寫作阿貴，也沒有佐證的。其餘音Ｑｕｅｉ的偏僻字樣，更加湊不上了。先前，我也曾問過趙太爺的兒子茂才先生，誰料博雅如此公，竟也茫然，但據結論說，是因為陳獨秀辦了《新青年》提倡洋字，所以國粹淪亡，無可查考了。我的最後的手段，只有托一個同鄉去查阿Ｑ犯事的案卷，八個月之後才有回信，說案卷裡並無與阿Ｑｕｅｉ的聲音相近的人。我雖不知道是真沒有，還是沒有查，然而也再沒有別的方法了。生怕註音字母還未通行，只好用了「洋字」，照英國流行的拼法寫他為阿Ｑｕｅｉ，略作阿Ｑ。這近於盲從《新青年》，自己也很抱歉，但茂才公尚且不知，我還有什麼好辦法呢。&lt;/p&gt;

&lt;p&gt;第四，是阿Ｑ的籍貫了。倘他姓趙，則據現在好稱郡望的老例，可以照《郡名百家姓》上的註解，說是「隴西天水人也」，但可惜這姓是不甚可靠的，因此籍貫也就有些決不定。他雖然多住未莊，然而也常常宿在別處，不能說是未莊人，即使說是「未莊人也」，也仍然有乖史法的。&lt;/p&gt;

&lt;p&gt;我所聊以自慰的，是還有一個「阿」字非常正確，絕無附會假借的缺點，頗可以就正於通人。至於其餘，卻都非淺學所能穿鑿，只希望有「歷史癖與考據癖」的胡適之先生的門人們，將來或者能夠尋出許多新端緒來，但是我這《阿Ｑ正傳》到那時卻又怕早經消滅了。&lt;/p&gt;

&lt;p&gt;以上可以算是序。&lt;/p&gt;

&lt;h2 id=&quot;第二章優勝紀略&quot;&gt;第二章　優勝紀略&lt;/h2&gt;

&lt;p&gt;阿Ｑ不獨是姓名籍貫有些渺茫，連他先前的「行狀」也渺茫。因為未莊的人們之於阿Ｑ，只要他幫忙，只拿他玩笑，從來沒有留心他的「行狀」的。而阿Ｑ自己也不說，獨有和別人口角的時候，間或瞪著眼睛道：&lt;/p&gt;

&lt;p&gt;「我先前——比你闊的多啦！你算是什麼東西！」&lt;/p&gt;

&lt;p&gt;阿Ｑ沒有家，住在未莊的土穀祠裡；也沒有固定的職業，只給人家做短工，割麥便割麥，舂米便舂米，撐船便撐船。工作略長久時，他也或住在臨時主人的家裡，但一完就走了。所以，人們忙碌的時候，也還記起阿Ｑ來，然而記起的是做工，並不是「行狀」；一閑空，連阿Ｑ都早忘卻，更不必說「行狀」了。只是有一回，有一個老頭子頌揚說：「阿Ｑ真能做！」這時阿Ｑ赤著膊，懶洋洋的瘦伶仃的正在他面前，別人也摸不著這話是真心還是譏笑，然而阿Ｑ很喜歡。&lt;/p&gt;

&lt;p&gt;阿Ｑ又很自尊，所有未莊的居民，全不在他眼神裡，甚而至於對於兩位「文童」也有以為不值一笑的神情。夫文童者，將來恐怕要變秀才者也；趙太爺錢太爺大受居民的尊敬，除有錢之外，就因為都是文童的爹爹，而阿Ｑ在精神上獨不表格外的崇奉，他想：我的兒子會闊得多啦！加以進了幾回城，阿Ｑ自然更自負，然而他又很鄙薄城裡人，譬如用三尺三寸寬的木板做成的凳子，未莊人叫「長凳」，他也叫「長凳」，城裡人卻叫「條凳」，他想：這是錯的，可笑！油煎大頭魚，未莊都加上半寸長的蔥葉，城裡卻加上切細的蔥絲，他想：這也是錯的，可笑！然而未莊人真是不見世面的可笑的鄉下人呵，他們沒有見過城裡的煎魚！&lt;/p&gt;

&lt;p&gt;阿Ｑ「先前闊」，見識高，而且「真能做」，本來幾乎是一個「完人」了，但可惜他體質上還有一些缺點。最惱人的是在他頭皮上，頗有幾處不知於何時的癩瘡疤。這雖然也在他身上，而看阿Ｑ的意思，倒也似乎以為不足貴的，因為他諱說「癩」以及一切近於「賴」的音，後來推而廣之，「光」也諱，「亮」也諱，再後來，連「燈」「燭」都諱了。一犯諱，不問有心與無心，阿Ｑ便全疤通紅的發起怒來，估量了對手，口訥的他便罵，氣力小的他便打；然而不知怎麼一回事，總還是阿Ｑ吃虧的時候多。於是他漸漸的變換了方針，大抵改為怒目而視了。&lt;/p&gt;

&lt;p&gt;誰知道阿Ｑ採用怒目主義之後，未莊的閑人們便愈喜歡玩笑他。一見面，他們便假作吃驚的說：&lt;/p&gt;

&lt;p&gt;「噲，亮起來了。」&lt;/p&gt;

&lt;p&gt;阿Ｑ照例的發了怒，他怒目而視了。&lt;/p&gt;

&lt;p&gt;「原來有保險燈在這裡！」他們並不怕。&lt;/p&gt;

&lt;p&gt;阿Ｑ沒有法，只得另外想出報複的話來：&lt;/p&gt;

&lt;p&gt;「你還不配……」這時候，又彷彿在他頭上的是一種高尚的光容的癩頭瘡，並非平常的癩頭瘡了；但上文說過，阿Ｑ是有見識的，他立刻知道和「犯忌」有點抵觸，便不再往底下說。&lt;/p&gt;

&lt;p&gt;閒人還不完，只撩他，於是終而至於打。阿Ｑ在形式上打敗了，被人揪住黃辮子，在壁上碰了四五個響頭，閒人這才心滿意足的得勝的走了，阿Ｑ站了一刻，心裡想，「我總算被兒子打了，現在的世界真不像樣……」於是也心滿意足的得勝的走了。&lt;/p&gt;

&lt;p&gt;阿Ｑ想在心裡的，後來每每說出口來，所以凡是和阿Ｑ玩笑的人們，幾乎全知道他有這一種精神上的勝利法，此後每逢揪住他黃辮子的時候，人就先一著對他說：&lt;/p&gt;

&lt;p&gt;「阿Ｑ，這不是兒子打老子，是人打畜生。自己說：人打畜生！」&lt;/p&gt;

&lt;p&gt;阿Ｑ兩隻手都捏住了自己的辮根，歪著頭，說道：&lt;/p&gt;

&lt;p&gt;「打蟲豸，好不好？我是蟲豸——還不放麽？」&lt;/p&gt;

&lt;p&gt;但雖然是蟲豸，閒人也並不放，仍舊在就近什麼地方給他碰了五六個響頭，這才心滿意足的得勝的走了，他以為阿Ｑ這回可遭了瘟。然而不到十秒鐘，阿Ｑ也心滿意足的得勝的走了，他覺得他是第一個能夠自輕自賤的人，除了「自輕自賤」不算外，餘下的就是「第一個」。狀元不也是「第一個」麽？「你算是什麼東西」呢！？&lt;/p&gt;

&lt;p&gt;阿Ｑ以如是等等妙法剋服怨敵之後，便愉快的跑到酒店裡喝幾碗酒，又和別人調笑一通，口角一通，又得了勝，愉快的回到土穀祠，放倒頭睡著了。假使有錢，他便去押牌寶，一堆人蹲在地面上，阿Ｑ即汗流滿面的夾在這中間，聲音他最響：&lt;/p&gt;

&lt;p&gt;「青龍四百！」&lt;/p&gt;

&lt;p&gt;「咳～～開～～啦！」樁家揭開盒子蓋，也是汗流滿面的唱。「天門啦～～角回啦～～！人和穿堂空在那裡啦～～！阿Ｑ的銅錢拿過來～～！」&lt;/p&gt;

&lt;p&gt;「穿堂一百——一百五十！」&lt;/p&gt;

&lt;p&gt;阿Ｑ的錢便在這樣的歌吟之下，漸漸的輸入別個汗流滿面的人物的腰間。他終於只好擠出堆外，站在後面看，替別人著急，一直到散場，然後戀戀的回到土穀祠，第二天，腫著眼睛去工作。&lt;/p&gt;

&lt;p&gt;但真所謂「塞翁失馬安知非福」罷，阿Ｑ不幸而贏了一回，他倒幾乎失敗了。&lt;/p&gt;

&lt;p&gt;這是未莊賽神的晚上。這晚上照例有一臺戲，戲臺左近，也照例有許多的賭攤。做戲的鑼鼓，在阿Ｑ耳朵裡彷彿在十裡之外；他只聽得樁家的歌唱了。他贏而又贏，銅錢變成角洋，角洋變成大洋，大洋又成了疊。他興高採烈得非常：&lt;/p&gt;

&lt;p&gt;「天門兩塊！」&lt;/p&gt;

&lt;p&gt;他不知道誰和誰為什麼打起架來了。罵聲打聲腳步聲，昏頭昏腦的一大陣，他才爬起來，賭攤不見了，人們也不見了，身上有幾處很似乎有些痛，似乎也挨了幾拳幾腳似的，幾個人詫異的對他看。他如有所失的走進土穀祠，定一定神，知道他的一堆洋錢不見了。趕賽會的賭攤多不是本村人，還到那裡去尋根柢呢？&lt;/p&gt;

&lt;p&gt;很白很亮的一堆洋錢！而且是他的——現在不見了！說是算被兒子拿去了罷，總還是忽忽不樂；說自己是蟲豸罷，也還是忽忽不樂：他這回才有些感到失敗的苦痛了。&lt;/p&gt;

&lt;p&gt;但他立刻轉敗為勝了。他擎起右手，用力的在自己臉上連打了兩個嘴巴，熱剌剌的有些痛；打完之後，便心平氣和起來，似乎打的是自己，被打的是別一個自己，不久也就彷彿是自己打了別個一般，——雖然還有些熱剌剌，——心滿意足的得勝的躺下了。&lt;/p&gt;

&lt;p&gt;他睡著了。&lt;/p&gt;

&lt;h2 id=&quot;第三章續優勝記略&quot;&gt;第三章　續優勝記略&lt;/h2&gt;

&lt;p&gt;然而阿Ｑ雖然常優勝，卻直待蒙趙太爺打他嘴巴之後，這才出了名。&lt;/p&gt;

&lt;p&gt;他付過地保二百文酒錢，憤憤的躺下了，後來想：「現在的世界太不成話，兒子打老子……」於是忽而想到趙太爺的威風，而現在是他的兒子了，便自己也漸漸的得意起來，爬起身，唱著《小孤孀上墳》到酒店去。這時候，他又覺得趙太爺高人一等了。&lt;/p&gt;

&lt;p&gt;說也奇怪，從此之後，果然大家也彷彿格外尊敬他。這在阿Ｑ，或者以為因為他是趙太爺的父親，而其實也不然。未莊通例，倘如阿七打阿八，或者李四打張三，向來本不算口碑。一上口碑，則打的既有名，被打的也就托庇有了名。至於錯在阿Ｑ，那自然是不必說。所以者何？就因為趙太爺是不會錯的。但他既然錯，為什麼大家又彷彿格外尊敬他呢？這可難解，穿鑿起來說，或者因為阿Ｑ說是趙太爺的本家，雖然挨了打，大家也還怕有些真，總不如尊敬一些穩當。否則，也如孔廟裡的太牢一般，雖然與豬羊一樣，同是畜生，但既經聖人下箸，先儒們便不敢妄動了。&lt;/p&gt;

&lt;p&gt;阿Ｑ此後倒得意了許多年。&lt;/p&gt;

&lt;p&gt;有一年的春天，他醉醺醺的在街上走，在牆根的日光下，看見王胡在那裡赤著膊捉蝨子，他忽然覺得身上也癢起來了。這王胡，又癩又胡，別人都叫他王癩胡，阿Ｑ卻刪去了一個癩字，然而非常渺視他。阿Ｑ的意思，以為癩是不足為奇的，只有這一部絡腮鬍子，實在太新奇，令人看不上眼。他於是併排坐下去了。倘是別的閑人們，阿Ｑ本不敢大意坐下去。但這王胡旁邊，他有什麼怕呢？老實說：他肯坐下去，簡直還是抬舉他。&lt;/p&gt;

&lt;p&gt;阿Ｑ也脫下破夾襖來，翻檢了一回，不知道因為新洗呢還是因為粗心，許多工夫，只捉到三四個。他看那王胡，卻是一個又一個，兩個又三個，只放在嘴裡畢畢剝剝的響。&lt;/p&gt;

&lt;p&gt;阿Ｑ最初是失望，後來卻不平了：看不上眼的王胡尚且那麼多，自己倒反這樣少，這是怎樣的大失體統的事呵！他很想尋一兩個大的，然而竟沒有，好容易才捉到一個中的，恨恨的塞在厚嘴唇裡，狠命一咬，劈的一聲，又不及王胡的響。&lt;/p&gt;

&lt;p&gt;他癩瘡疤塊塊通紅了，將衣服摔在地上，吐一口唾沫，說：&lt;/p&gt;

&lt;p&gt;「這毛蟲！」&lt;/p&gt;

&lt;p&gt;「癩皮狗，你罵誰？」王胡輕蔑的抬起眼來說。&lt;/p&gt;

&lt;p&gt;阿Ｑ近來雖然比較的受人尊敬，自己也更高傲些，但和那些打慣的閑人們見面還膽怯，獨有這回卻非常武勇了。這樣滿臉鬍子的東西，也敢出言無狀麽？&lt;/p&gt;

&lt;p&gt;「誰認便罵誰！」他站起來，兩手叉在腰間說。&lt;/p&gt;

&lt;p&gt;「你的骨頭癢了麽？」王胡也站起來，披上衣服說。&lt;/p&gt;

&lt;p&gt;阿Ｑ以為他要逃了，搶進去就是一拳。這拳頭還未達到身上，已經被他抓住了，只一拉，阿Ｑ蹌蹌踉踉的跌進去，立刻又被王胡扭住了辮子，要拉到牆上照例去碰頭。&lt;/p&gt;

&lt;p&gt;「‘君子動口不動手’！」阿Ｑ歪著頭說。&lt;/p&gt;

&lt;p&gt;王胡似乎不是君子，並不理會，一連給他碰了五下，又用力的一推，至於阿Ｑ跌出六尺多遠，這才滿足的去了。&lt;/p&gt;

&lt;p&gt;在阿Ｑ的記憶上，這大約要算是生平第一件的屈辱，因為王胡以絡腮鬍子的缺點，向來只被他奚落，從沒有奚落他，更不必說動手了。而他現在竟動手，很意外，難道真如市上所說，皇帝已經停了，不要秀才和舉人了，因此趙家減了威風，因此他們也便小覷了他麽？&lt;/p&gt;

&lt;p&gt;阿Ｑ無可適從的站著。&lt;/p&gt;

&lt;p&gt;遠遠的走來了一個人，他的對頭又到了。這也是阿Ｑ最厭惡的一個人，就是錢太爺的大兒子。他先前跑上城裡去進洋學堂，不知怎麼又跑到東洋去了，半年之後他回到家裡來，腿也直了，辮子也不見了，他的母親大哭了十幾場，他的老婆跳了三回井。後來，他的母親到處說，「這辮子是被壞人灌醉了酒剪去了。本來可以做大官，現在只好等留長再說了。」然而阿Ｑ不肯信，偏稱他「假洋鬼子」，也叫作「裡通外國的人」，一見他，一定在肚子裡暗暗的咒罵。&lt;/p&gt;

&lt;p&gt;阿Ｑ尤其「深惡而痛絕之」的，是他的一條假辮子。辮子而至於假，就是沒有了做人的資格；他的老婆不跳第四回井，也不是好女人。&lt;/p&gt;

&lt;p&gt;這「假洋鬼子」近來了。&lt;/p&gt;

&lt;p&gt;「禿兒。驢……」阿Ｑ歷來本只在肚子裡罵，沒有出過聲，這回因為正氣忿，因為要報仇，便不由的輕輕的說出來了。&lt;/p&gt;

&lt;p&gt;不料這禿兒卻拿著一支黃漆的棍子——就是阿Ｑ所謂哭喪棒——大蹋步走了過來。阿Ｑ在這剎那，便知道大約要打了，趕緊抽緊筋骨，聳了肩膀等候著，果然，拍的一聲，似乎確鑿打在自己頭上了。&lt;/p&gt;

&lt;p&gt;「我說他！」阿Ｑ指著近旁的一個孩子，分辯說。&lt;/p&gt;

&lt;p&gt;拍！拍拍！&lt;/p&gt;

&lt;p&gt;在阿Ｑ的記憶上，這大約要算是生平第二件的屈辱。幸而拍拍的響了之後，於他倒似乎完結了一件事，反而覺得輕鬆些，而且「忘卻」這一件祖傳的寶貝也發生了效力，他慢慢的走，將到酒店門口，早已有些高興了。&lt;/p&gt;

&lt;p&gt;但對面走來了靜修庵裡的小尼姑。阿Ｑ便在平時，看見伊也一定要唾罵，而況在屈辱之後呢？他於是發生了回憶，又發生了敵愾了。&lt;/p&gt;

&lt;p&gt;「我不知道我今天為什麼這樣晦氣，原來就因為見了你！」他想。&lt;/p&gt;

&lt;p&gt;他迎上去，大聲的吐一口唾沫：&lt;/p&gt;

&lt;p&gt;「咳，呸！」&lt;/p&gt;

&lt;p&gt;小尼姑全不睬，低了頭只是走。阿Ｑ走近伊身旁，突然伸出手去摩著伊新剃的頭皮，呆笑著，說：&lt;/p&gt;

&lt;p&gt;「禿兒！快回去，和尚等著你……」&lt;/p&gt;

&lt;p&gt;「你怎麼動手動腳……」尼姑滿臉通紅的說，一面趕快走。&lt;/p&gt;

&lt;p&gt;酒店裡的人大笑了。阿Ｑ看見自己的勛業得了賞識，便愈加興高採烈起來：&lt;/p&gt;

&lt;p&gt;「和尚動得，我動不得？」他扭住伊的面頰。&lt;/p&gt;

&lt;p&gt;酒店裡的人大笑了。阿Ｑ更得意，而且為了滿足那些賞鑒家起見，再用力的一擰，才放手。&lt;/p&gt;

&lt;p&gt;他這一戰，早忘卻了王胡，也忘卻了假洋鬼子，似乎對於今天的一切「晦氣」都報了仇；而且奇怪，又彷彿全身比拍拍的響了之後輕鬆，飄飄然的似乎要飛去了。&lt;/p&gt;

&lt;p&gt;「這斷子絕孫的阿Ｑ！」遠遠地聽得小尼姑的帶哭的聲音。&lt;/p&gt;

&lt;p&gt;「哈哈哈！」阿Ｑ十分得意的笑。&lt;/p&gt;

&lt;p&gt;「哈哈哈！」酒店裡的人也九分得意的笑。&lt;/p&gt;

&lt;p&gt;第四章　戀愛的悲劇[編輯]
有人說：有些勝利者，願意敵手如虎，如鷹，他才感得勝利的歡喜；假使如羊，如小雞，他便反覺得勝利的無聊。又有些勝利者，當剋服一切之後，看見死的死了，降的降了，「臣誠惶誠恐死罪死罪」，他於是沒有了敵人，沒有了對手，沒有了朋友，只有自己在上，一個，孤另另，淒涼，寂寞，便反而感到了勝利的悲哀。然而我們的阿Ｑ卻沒有這樣乏，他是永遠得意的：這或者也是中國精神文明冠於全球的一個證據了。&lt;/p&gt;

&lt;p&gt;看那，他飄飄然的似乎要飛去了！&lt;/p&gt;

&lt;p&gt;然而這一次的勝利，卻又使他有些異樣。他飄飄然的飛了大半天，飄進土穀祠，照例應該躺下便打鼾。誰知道這一晚，他很不容易合眼，他覺得自己的大拇指和第二指有點古怪：彷彿比平常滑膩些。不知道是小尼姑的臉上有一點滑膩的東西粘在他指上，還是他的指頭在小尼姑臉上磨得滑膩了？……&lt;/p&gt;

&lt;p&gt;「斷子絕孫的阿Ｑ！」&lt;/p&gt;

&lt;p&gt;阿Ｑ的耳朵裡又聽到這句話。他想：不錯，應該有一個女人，斷子絕孫便沒有人供一碗飯，……應該有一個女人。夫「不孝有三無後為大」，而「若敖之鬼餒而」，也是一件人生的大哀，所以他那思想，其實是樣樣合於聖經賢傳的，只可惜後來有些「不能收其放心」了。&lt;/p&gt;

&lt;p&gt;「女人，女人！……」他想。&lt;/p&gt;

&lt;p&gt;「……和尚動得……女人，女人！……女人！」他又想。&lt;/p&gt;

&lt;p&gt;我們不能知道這晚上阿Ｑ在什麼時候才打鼾。但大約他從此總覺得指頭有些滑膩，所以他從此總有些飄飄然；「女……」他想。&lt;/p&gt;

&lt;p&gt;即此一端，我們便可以知道女人是害人的東西。&lt;/p&gt;

&lt;p&gt;中國的男人，本來大半都可以做聖賢，可惜全被女人毀掉了。商是妲己鬧亡的；周是褒姒弄壞的；秦……雖然史無明文，我們也假定他因為女人，大約未必十分錯；而董卓可是的確給貂蟬害死了。&lt;/p&gt;

&lt;p&gt;阿Ｑ本來也是正人，我們雖然不知道他曾蒙什麼明師指授過，但他對於「男女之大防」卻歷來非常嚴；也很有排斥異端——如小尼姑及假洋鬼子之類——的正氣。他的學說是：凡尼姑，一定與和尚私通；一個女人在外面走，一定想引誘野男人；一男一女在那裡講話，一定要有勾當了。為懲治他們起見，所以他往往怒目而視，或者大聲說幾句「誅心」話，或者在冷僻處，便從後面擲一塊小石頭。&lt;/p&gt;

&lt;p&gt;誰知道他將到「而立」之年，竟被小尼姑害得飄飄然了。這飄飄然的精神，在禮教上是不應該有的，——所以女人真可惡，假使小尼姑的臉上不滑膩，阿Ｑ便不至於被蠱，又假使小尼姑的臉上蓋一層布，阿Ｑ便也不至於被蠱了，——他五六年前，曾在戲臺下的人叢中擰過一個女人的大腿，但因為隔一層褲，所以此後並不飄飄然，——而小尼姑並不然，這也足見異端之可惡。&lt;/p&gt;

&lt;p&gt;「女……」阿Ｑ想。&lt;/p&gt;

&lt;p&gt;他對於以為「一定想引誘野男人」的女人，時常留心看，然而伊並不對他笑。他對於和他講話的女人，也時常留心聽，然而伊又並不提起關於什麼勾當的話來。哦，這也是女人可惡之一節：伊們全都要裝「假正經」的。&lt;/p&gt;

&lt;p&gt;這一天，阿Ｑ在趙太爺家裡舂了一天米，吃過晚飯，便坐在廚房裡吸旱煙。倘在別家，吃過晚飯本可以回去的了，但趙府上晚飯早，雖說定例不准掌燈，一吃完便睡覺，然而偶然也有一些例外：其一，是趙大爺未進秀才的時候，准其點燈讀文章；其二，便是阿Ｑ來做短工的時候，准其點燈舂米。因為這一條例外，所以阿Ｑ在動手舂米之前，還坐在廚房裡吸旱煙。&lt;/p&gt;

&lt;p&gt;吳媽，是趙太爺家裡唯一的女僕，洗完了碗碟，也就在長凳上坐下了，而且和阿Ｑ談閑天：&lt;/p&gt;

&lt;p&gt;「太太兩天沒有吃飯哩，因為老爺要買一個小的……」&lt;/p&gt;

&lt;p&gt;「女人……吳媽……這小孤孀……」阿Ｑ想。&lt;/p&gt;

&lt;p&gt;「我們的少奶奶是八月裡要生孩子了……」&lt;/p&gt;

&lt;p&gt;「女人……」阿Ｑ想。&lt;/p&gt;

&lt;p&gt;阿Ｑ放下煙管，站了起來。&lt;/p&gt;

&lt;p&gt;「我們的少奶奶……」吳媽還嘮叨說。&lt;/p&gt;

&lt;p&gt;「我和你困覺，我和你困覺！」阿Ｑ忽然搶上去，對伊跪下了。&lt;/p&gt;

&lt;p&gt;一剎時中很寂然。&lt;/p&gt;

&lt;p&gt;「阿呀！」吳媽楞了一息，突然發抖，大叫著往外跑，且跑且嚷，似乎後來帶哭了。&lt;/p&gt;

&lt;p&gt;阿Ｑ對了牆壁跪著也發楞，於是兩手扶著空板凳，慢慢的站起來，彷彿覺得有些糟。他這時確也有些忐忑了，慌張的將煙管插在褲帶上，就想去舂米。蓬的一聲，頭上著了很粗的一下，他急忙迴轉身去，那秀才便拿了一支大竹槓站在他面前。&lt;/p&gt;

&lt;p&gt;「你反了，……你這……」&lt;/p&gt;

&lt;p&gt;大竹槓又向他劈下來了。阿Ｑ兩手去抱頭，拍的正打在指節上，這可很有些痛。他衝出廚房門，彷彿背上又著了一下似的。&lt;/p&gt;

&lt;p&gt;「忘八蛋！」秀才在後面用了官話這樣罵。&lt;/p&gt;

&lt;p&gt;阿Ｑ奔入舂米場，一個人站著，還覺得指頭痛，還記得「忘八蛋」，因為這話是未莊的鄉下人從來不用，專是見過官府的闊人用的，所以格外怕，而印象也格外深。但這時，他那「女……」的思想卻也沒有了。而且打罵之後，似乎一件事也已經收束，倒反覺得一無掛礙似的，便動手去舂米。舂了一會，他熱起來了，又歇了手脫衣服。&lt;/p&gt;

&lt;p&gt;脫下衣服的時候，他聽得外面很熱鬧，阿Ｑ生平本來最愛看熱鬧，便即尋聲走出去了。尋聲漸漸的尋到趙太爺的內院裡，雖然在昏黃中，卻辨得出許多人，趙府一家連兩日不吃飯的太太也在內，還有間壁的鄒七嫂，真正本家的趙白眼，趙司晨。&lt;/p&gt;

&lt;p&gt;少奶奶正拖著吳媽走出下房來，一面說：&lt;/p&gt;

&lt;p&gt;「你到外面來，……不要躲在自己房裡想……」&lt;/p&gt;

&lt;p&gt;「誰不知道你正經，……短見是萬萬尋不得的。」鄒七嫂也從旁說。&lt;/p&gt;

&lt;p&gt;吳媽只是哭，夾些話，卻不甚聽得分明。&lt;/p&gt;

&lt;p&gt;阿Ｑ想：「哼，有趣，這小孤孀不知道鬧著什麼玩意兒了？」他想打聽，走近趙司晨的身邊。這時他猛然間看見趙大爺向他奔來，而且手裡捏著一支大竹槓。他看見這一支大竹槓，便猛然間悟到自己曾經被打，和這一場熱鬧似乎有點相關。他翻身便走，想逃回舂米場，不圖這支竹槓阻了他的去路，於是他又翻身便走，自然而然的走出後門，不多工夫，已在土穀祠內了。&lt;/p&gt;

&lt;p&gt;阿Ｑ坐了一會，皮膚有些起粟，他覺得冷了，因為雖在春季，而夜間頗有餘寒，尚不宜於赤膊。他也記得布衫留在趙家，但倘若去取，又深怕秀才的竹槓。然而地保進來了。&lt;/p&gt;

&lt;p&gt;「阿Ｑ，你的媽媽的！你連趙家的用人都調戲起來，簡直是造反。害得我晚上沒有覺睡，你的媽媽的！……」&lt;/p&gt;

&lt;p&gt;如是雲雲的教訓了一通，阿Ｑ自然沒有話。臨末，因為在晚上，應該送地保加倍酒錢四百文，阿Ｑ正沒有現錢，便用一頂氈帽做抵押，並且訂定了五條件：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;一　明天用紅燭——要一斤重的——一對，香一封，到趙府上去賠罪。
&lt;br /&gt;二　趙府上請道士祓除縊鬼，費用由阿Ｑ負擔。
&lt;br /&gt;三　阿Ｑ從此不准踏進趙府的門檻。
&lt;br /&gt;四　吳媽此後倘有不測，惟阿Ｑ是問。
&lt;br /&gt;五　阿Ｑ不准再去索取工錢和布衫。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;阿Ｑ自然都答應了，可惜沒有錢。幸而已經春天，棉被可以無用，便質了二千大錢，履行條約。赤膊磕頭之後，居然還剩幾文，他也不再贖氈帽，統統喝了酒了。但趙家也並不燒香點燭，因為太太拜佛的時候可以用，留著了。那破布衫是大半做了少奶奶八月間生下來的孩子的襯尿布，那小半破爛的便都做了吳媽的鞋底。&lt;/p&gt;

&lt;h2 id=&quot;第五章生計問題&quot;&gt;第五章　生計問題&lt;/h2&gt;

&lt;p&gt;阿Ｑ禮畢之後，仍舊回到土穀祠，太陽下去了，漸漸覺得世上有些古怪。他仔細一想，終於省悟過來：其原因蓋在自己的赤膊。他記得破夾襖還在，便披在身上，躺倒了，待張開眼睛，原來太陽又已經照在西牆上頭了。他坐起身，一面說道，「媽媽的……」&lt;/p&gt;

&lt;p&gt;他起來之後，也仍舊在街上逛，雖然不比赤膊之有切膚之痛，卻又漸漸的覺得世上有些古怪了。彷彿從這一天起，未莊的女人們忽然都怕了羞，伊們一見阿Ｑ走來，便個個躲進門裡去。甚而至於將近五十歲的鄒七嫂，也跟著別人亂鑽，而且將十一歲的女兒都叫進去了。阿Ｑ很以為奇，而且想：「這些東西忽然都學起小姐模樣來了。這娼婦們……」&lt;/p&gt;

&lt;p&gt;但他更覺得世上有些古怪，卻是許多日以後的事。其一，酒店不肯賒欠了；其二，管土穀祠的老頭子說些廢話，似乎叫他走；其三，他雖然記不清多少日，但確乎有許多日，沒有一個人來叫他做短工。酒店不賒，熬著也罷了；老頭子催他走，嚕囌一通也就算了；只是沒有人來叫他做短工，卻使阿Ｑ肚子餓：這委實是一件非常「媽媽的」的事情。&lt;/p&gt;

&lt;p&gt;阿Ｑ忍不下去了，他只好到老主顧的家裡去探問，——但獨不許踏進趙府的門檻，——然而情形也異樣：一定走出一個男人來，現了十分煩厭的相貌，像回覆乞丐一般的搖手道：&lt;/p&gt;

&lt;p&gt;「沒有沒有！你出去！」&lt;/p&gt;

&lt;p&gt;阿Ｑ愈覺得稀奇了。他想，這些人家向來少不了要幫忙，不至於現在忽然都無事，這總該有些蹊蹺在裡面了。他留心打聽，才知道他們有事都去叫小Ｄｏｎ。這小Ｄ，是一個窮小子，又瘦又乏，在阿Ｑ的眼睛裡，位置是在王胡之下的，誰料這小子竟謀了他的飯碗去。所以阿Ｑ這一氣，更與平常不同，當氣憤憤的走著的時候，忽然將手一揚，唱道：&lt;/p&gt;

&lt;p&gt;「我手執鋼鞭將你打！……」&lt;/p&gt;

&lt;p&gt;幾天之後，他竟在錢府的照壁前遇見了小Ｄ。「仇人相見分外眼明」，阿Ｑ便迎上去，小Ｄ也站住了。&lt;/p&gt;

&lt;p&gt;「畜生！」阿Ｑ怒目而視的說，嘴角上飛出唾沫來。&lt;/p&gt;

&lt;p&gt;「我是蟲豸，好麽？……」小Ｄ說。&lt;/p&gt;

&lt;p&gt;這謙遜反使阿Ｑ更加憤怒起來，但他手裡沒有鋼鞭，於是只得撲上去，伸手去拔小Ｄ的辮子。小Ｄ一手護住了自己的辮根，一手也來拔阿Ｑ的辮子，阿Ｑ便也將空著的一隻手護住了自己的辮根。從先前的阿Ｑ看來，，小Ｄ本來是不足齒數的，但他近來挨了餓，又瘦又乏已經不下於小Ｄ，所以便成了勢均力敵的現象，四隻手拔著兩顆頭，都彎了腰，在錢家粉牆上映出一個藍色的虹形，至於半點鐘之久了。&lt;/p&gt;

&lt;p&gt;「好了，好了！」看的人們說，大約是解勸的。&lt;/p&gt;

&lt;p&gt;「好，好！」看的人們說，不知道是解勸，是頌揚，還是煽動。&lt;/p&gt;

&lt;p&gt;然而他們都不聽。阿Ｑ進三步，小Ｄ便退三步，都站著；小Ｄ進三步，阿Ｑ便退三步，又都站著。大約半點鐘，——未莊少有自鳴鐘，所以很難說，或者二十分，——他們的頭髮裡便都冒煙，額上便都流汗，阿Ｑ的手放鬆了，在同一瞬間，小Ｄ的手也正放鬆了，同時直起，同時退開，都擠出人叢去。&lt;/p&gt;

&lt;p&gt;「記著罷，媽媽的……」阿Ｑ回過頭去說。&lt;/p&gt;

&lt;p&gt;「媽媽的，記著罷……」小Ｄ也回過頭來說。&lt;/p&gt;

&lt;p&gt;這一場「龍虎鬥」似乎並無勝敗，也不知道看的人可滿足，都沒有發什麼議論，而阿Ｑ卻仍然沒有人來叫他做短工。&lt;/p&gt;

&lt;p&gt;有一日很溫和，微風拂拂的頗有些夏意了，阿Ｑ卻覺得寒冷起來，但這還可擔當，第一倒是肚子餓。棉被，氈帽，布衫，早已沒有了，其次就賣了棉襖；現在有褲子，卻萬不可脫的；有破夾襖，又除了送人做鞋底之外，決定賣不出錢。他早想在路上拾得一註錢，但至今還沒有見；他想在自己的破屋裡忽然尋到一註錢，慌張的四顧，但屋內是空虛而且瞭然。於是他決計出門求食去了。&lt;/p&gt;

&lt;p&gt;他在路上走著要「求食」，看見熟識的酒店，看見熟識的饅頭，但他都走過了，不但沒有暫停，而且並不想要。他所求的不是這類東西了；他求的是什麼東西，他自己不知道。&lt;/p&gt;

&lt;p&gt;未莊本不是大村鎮，不多時便走盡了。村外多是水田，滿眼是新秧的嫩綠，夾著幾個圓形的活動的黑點，便是耕田的農夫。阿Ｑ並不賞鑒這田家樂，卻只是走，因為他直覺的知道這與他的「求食」之道是很遼遠的。但他終於走到靜修庵的牆外了。&lt;/p&gt;

&lt;p&gt;庵周圍也是水田，粉牆突出在新綠裡，後面的低土牆裡是菜園。阿Ｑ遲疑了一會，四面一看，並沒有人。他便爬上這矮牆去，扯著何首烏藤，但泥土仍然簌簌的掉，阿Ｑ的腳也索索的抖；終於攀著桑樹枝，跳到裡面了。裡面真是鬱鬱蔥蔥，但似乎並沒有黃酒饅頭，以及此外可吃的之類。靠西牆是竹叢，下麵許多筍，只可惜都是並未煮熟的，還有油菜早經結子，芥菜已將開花，小白菜也很老了。&lt;/p&gt;

&lt;p&gt;阿Ｑ彷彿文童落第似的覺得很冤屈，他慢慢走近園門去，忽而非常驚喜了，這分明是一畦老蘿蔔。他於是蹲下便拔，而門口突然伸出一個很圓的頭來，又即縮回去了，這分明是小尼姑。小尼姑之流是阿Ｑ本來視若草芥的，但世事須「退一步想」，所以他便趕緊拔起四個蘿蔔，擰下青葉，兜在大襟裡。然而老尼姑已經出來了。&lt;/p&gt;

&lt;p&gt;「阿彌陀佛，阿Ｑ，你怎麼跳進園裡來偷蘿蔔！……阿呀，罪過呵，阿唷，阿彌陀佛！……」&lt;/p&gt;

&lt;p&gt;「我什麼時候跳進你的園裡來偷蘿蔔？」阿Ｑ且看且走的說。&lt;/p&gt;

&lt;p&gt;「現在……這不是？」老尼姑指著他的衣兜。&lt;/p&gt;

&lt;p&gt;「這是你的？你能叫得他答應你麽？你……」&lt;/p&gt;

&lt;p&gt;阿Ｑ沒有說完話，拔步便跑；追來的是一匹很肥大的黑狗。這本來在前門的，不知怎的到後園來了。黑狗哼而且追，已經要咬著阿Ｑ的腿，幸而從衣兜裡落下一個蘿蔔來，那狗給一嚇，略略一停，阿Ｑ已經爬上桑樹，跨到土牆，連人和蘿蔔都滾出牆外面了。只剩著黑狗還在對著桑樹嗥，老尼姑念著佛。&lt;/p&gt;

&lt;p&gt;阿Ｑ怕尼姑又放出黑狗來，拾起蘿蔔便走，沿路又撿了幾塊小石頭，但黑狗卻並不再現。阿Ｑ於是拋了石塊，一面走一面吃，而且想道，這裡也沒有什麼東西尋，不如進城去……&lt;/p&gt;

&lt;p&gt;待三個蘿蔔吃完時，他已經打定了進城的主意了。&lt;/p&gt;

&lt;h2 id=&quot;第六章從中興到末路&quot;&gt;第六章　從中興到末路&lt;/h2&gt;

&lt;p&gt;在未莊再看見阿Ｑ出現的時候，是剛過了這年的中秋。人們都驚異，說是阿Ｑ回來了，於是又回上去想道，他先前那裡去了呢？阿Ｑ前幾回的上城，大抵早就興高採烈的對人說，但這一次卻並不，所以也沒有一個人留心到。他或者也曾告訴過管土穀祠的老頭子，然而未莊老例，只有趙太爺錢太爺和秀才大爺上城才算一件事。假洋鬼子尚且不足數，何況是阿Ｑ：因此老頭子也就不替他宣傳，而未莊的社會上也就無從知道了。&lt;/p&gt;

&lt;p&gt;但阿Ｑ這回的回來，卻與先前大不同，確乎很值得驚異。天色將黑，他睡眼蒙朧的在酒店門前出現了，他走近櫃臺，從腰間伸出手來，滿把是銀的和銅的，在櫃上一扔說，「現錢！打酒來！」穿的是新夾襖，看去腰間還掛著一個大搭連，沈鈿鈿的將褲帶墜成了很彎很彎的弧線。未莊老例，看見略有些醒目的人物，是與其慢也寧敬的，現在雖然明知道是阿Ｑ，但因為和破夾襖的阿Ｑ有些兩樣了，古人雲，「士別三日便當刮目相待」，所以堂倌，掌櫃，酒客，路人，便自然顯出一種凝而且敬的形態來。掌櫃既先之以點頭，又繼之以談話：&lt;/p&gt;

&lt;p&gt;「豁，阿Ｑ，你回來了！」&lt;/p&gt;

&lt;p&gt;「回來了。」&lt;/p&gt;

&lt;p&gt;「發財發財，你是——在……」&lt;/p&gt;

&lt;p&gt;「上城去了！」&lt;/p&gt;

&lt;p&gt;這一件新聞，第二天便傳遍了全未莊。人人都願意知道現錢和新夾襖的阿Ｑ的中興史，所以在酒店裡，茶館裡，廟簷下，便漸漸的探聽出來了。這結果，是阿Ｑ得了新敬畏。&lt;/p&gt;

&lt;p&gt;據阿Ｑ說，他是在舉人老爺家裡幫忙。這一節，聽的人都肅然了。這老爺本姓白，但因為合城裡只有他一個舉人，所以不必再冠姓，說起舉人來就是他。這也不獨在未莊是如此，便是一百里方圓之內也都如此，人們幾乎多以為他的姓名就叫舉人老爺的了。在這人的府上幫忙，那當然是可敬的。但據阿Ｑ又說，他卻不高興再幫忙了，因為這舉人老爺實在太「媽媽的」了。這一節，聽的人都嘆息而且快意，因為阿Ｑ本不配在舉人老爺家裡幫忙，而不幫忙是可惜的。&lt;/p&gt;

&lt;p&gt;據阿Ｑ說，他的回來，似乎也由於不滿意城裡人，這就在他們將長凳稱為條凳，而且煎魚用蔥絲，加以最近觀察所得的缺點，是女人的走路也扭得不很好。然而也偶有大可佩服的地方，即如未莊的鄉下人不過打三十二張的竹牌，只有假洋鬼子能夠叉「麻醬」，城裡卻連小烏龜子都叉得精熟的。什麼假洋鬼子，只要放在城裡的十幾歲的小烏龜子的手裡，也就立刻是「小鬼見閻王」。這一節，聽的人都赧然了。&lt;/p&gt;

&lt;p&gt;「你們可看見過殺頭麽？」阿Ｑ說，「咳，好看。殺革命黨。唉，好看好看，……」他搖搖頭，將唾沫飛在正對面的趙司晨的臉上。這一節，聽的人都凜然了。但阿Ｑ又四面一看，忽然揚起右手，照著伸長脖子聽得出神的王胡的後項窩上直劈下去道：&lt;/p&gt;

&lt;p&gt;「嚓！」&lt;/p&gt;

&lt;p&gt;王胡驚得一跳，同時電光石火似的趕快縮了頭，而聽的人又都悚然而且欣然了。從此王胡瘟頭瘟腦的許多日，並且再不敢走近阿Ｑ的身邊；別的人也一樣。&lt;/p&gt;

&lt;p&gt;阿Ｑ這時在未莊人眼睛裡的地位，雖不敢說超過趙太爺，但謂之差不多，大約也就沒有什麼語病的了。&lt;/p&gt;

&lt;p&gt;然而不多久，這阿Ｑ的大名忽又傳遍了未莊的閨中。雖然未莊只有錢趙兩姓是大屋，此外十之九都是淺閨，但閨中究竟是閨中，所以也算得一件神異。女人們見面時一定說，鄒七嫂在阿Ｑ那裡買了一條藍綢裙，舊固然是舊的，但只化了九角錢。還有趙白眼的母親，——一說是趙司晨的母親，待考，——也買了一件孩子穿的大紅洋紗衫，七成新，只用三百大錢九二串。於是伊們都眼巴巴的想見阿Ｑ，缺綢裙的想問他買綢裙，要洋紗衫的想問他買洋紗衫，不但見了不逃避，有時阿Ｑ已經走過了，也還要追上去叫住他，問道：&lt;/p&gt;

&lt;p&gt;「阿Ｑ，你還有綢裙麽？沒有？紗衫也要的，有罷？」&lt;/p&gt;

&lt;p&gt;後來這終於從淺閨傳進深閨裡去了。因為鄒七嫂得意之餘，將伊的綢裙請趙太太去鑒賞，趙太太又告訴了趙太爺而且著實恭維了一番。趙太爺便在晚飯桌上，和秀才大爺討論，以為阿Ｑ實在有些古怪，我們門窗應該小心些；但他的東西，不知道可還有什麼可買，也許有點好東西罷。加以趙太太也正想買一件價廉物美的皮背心。於是家族決議，便托鄒七嫂即刻去尋阿Ｑ，而且為此新闢了第三種的例外：這晚上也姑且特准點油燈。&lt;/p&gt;

&lt;p&gt;油燈幹了不少了，阿Ｑ還不到。趙府的全眷都很焦急，打著呵欠，或恨阿Ｑ太飄忽，或怨鄒七嫂不上緊。趙太太還怕他因為春天的條件不敢來，而趙太爺以為不足慮：因為這是「我」去叫他的。果然，到底趙太爺有見識，阿Ｑ終於跟著鄒七嫂進來了。&lt;/p&gt;

&lt;p&gt;「他只說沒有沒有，我說你自己當面說去，他還要說，我說……」鄒七嫂氣喘吁吁的走著說。&lt;/p&gt;

&lt;p&gt;「太爺！」阿Ｑ似笑非笑的叫了一聲，在簷下站住了。&lt;/p&gt;

&lt;p&gt;「阿Ｑ，聽說你在外面發財，」趙太爺踱開去，眼睛打量著他的全身，一面說。「那很好，那很好的。這個，……聽說你有些舊東西，……可以都拿來看一看，……這也並不是別的，因為我倒要……」&lt;/p&gt;

&lt;p&gt;「我對鄒七嫂說過了。都完了。」&lt;/p&gt;

&lt;p&gt;「完了？」趙太爺不覺失聲的說，「那裡會完得這樣快呢？」&lt;/p&gt;

&lt;p&gt;「那是朋友的，本來不多。他們買了些，……」&lt;/p&gt;

&lt;p&gt;「總該還有一點罷。」&lt;/p&gt;

&lt;p&gt;「現在，只剩了一張門幕了。」&lt;/p&gt;

&lt;p&gt;「就拿門幕來看看罷。」趙太太慌忙說。&lt;/p&gt;

&lt;p&gt;「那麼，明天拿來就是，」趙太爺卻不甚熱心了。「阿Ｑ，你以後有什麼東西的時候，你儘先送來給我們看，……」&lt;/p&gt;

&lt;p&gt;「價錢決不會比別家出得少！」秀才說。秀才娘子忙一瞥阿Ｑ的臉，看他感動了沒有。&lt;/p&gt;

&lt;p&gt;「我要一件皮背心。」趙太太說。&lt;/p&gt;

&lt;p&gt;阿Ｑ雖然答應著，卻懶洋洋的出去了，也不知道他是否放在心上。這使趙太爺很失望，氣憤而且擔心，至於停止了打呵欠。秀才對於阿Ｑ的態度也很不平，於是說，這忘八蛋要提防，或者不如吩咐地保，不許他住在未莊。但趙太爺以為不然，說這也怕要結怨，況且做這路生意的大概是「老鷹不吃窩下食」，本村倒不必擔心的；只要自己夜裡警醒點就是了。秀才聽了這「庭訓」，非常之以為然，便即刻撤銷了驅逐阿Ｑ的提議，而且叮囑鄒七嫂，請伊千萬不要向人提起這一段話。&lt;/p&gt;

&lt;p&gt;但第二日，鄒七嫂便將那藍裙去染了皂，又將阿Ｑ可疑之點傳揚出去了，可是確沒有提起秀才要驅逐他這一節。然而這已經於阿Ｑ很不利。最先，地保尋上門了，取了他的門幕去，阿Ｑ說是趙太太要看的，而地保也不還並且要議定每月的孝敬錢。其次，是村人對於他的敬畏忽而變相了，雖然還不敢來放肆，卻很有遠避的神情，而這神情和先前的防他來「嚓」的時候又不同，頗混著「敬而遠之」的分子了。&lt;/p&gt;

&lt;p&gt;只有一班閑人們卻還要尋根究底的去探阿Ｑ的底細。阿Ｑ也並不諱飾，傲然的說出他的經驗來。從此他們才知道，他不過是一個小腳色，不但不能上牆，並且不能進洞，只站在洞外接東西。有一夜，他剛纔接到一個包，正手再進去，不一會，只聽得裡面大嚷起來，他便趕緊跑，連夜爬出城，逃回未莊來了，從此不敢再去做。然而這故事卻於阿Ｑ更不利，村人對於阿Ｑ的「敬而遠之」者，本因為怕結怨，誰料他不過是一個不敢再偷的偷兒呢？這實在是「斯亦不足畏也矣」。&lt;/p&gt;

&lt;h2 id=&quot;第七章革命&quot;&gt;第七章　革命&lt;/h2&gt;

&lt;p&gt;宣統三年九月十四日——即阿Ｑ將搭連賣給趙白眼的這一天——三更四點，有一隻大烏篷船到了趙府上的河埠頭。這船從黑魆魆中盪來，鄉下人睡得熟，都沒有知道；出去時將近黎明，卻很有幾個看見的了。據探頭探腦的調查來的結果，知道那竟是舉人老爺的船！&lt;/p&gt;

&lt;p&gt;那船便將大不安載給了未莊，不到正午，全村的人心就很動搖。船的使命，趙家本來是很秘密的，但茶坊酒肆裡卻都說，革命黨要進城，舉人老爺到我們鄉下來逃難了。惟有鄒七嫂不以為然，說那不過是幾口破衣箱，舉人老爺想來寄存的，卻已被趙太爺回覆轉去。其實舉人老爺和趙秀才素不相能，在理本不能有「共患難」的情誼，況且鄒七嫂又和趙家是鄰居，見聞較為切近，所以大概該是伊對的。&lt;/p&gt;

&lt;p&gt;然而謠言很旺盛，說舉人老爺雖然似乎沒有親到，卻有一封長信，和趙家排了「轉折親」。趙太爺肚裡一輪，覺得於他總不會有壞處，便將箱子留下了，現就塞在太太的床底下。至於革命黨，有的說是便在這一夜進了城，個個白盔白甲：穿著崇正皇帝的素。&lt;/p&gt;

&lt;p&gt;阿Ｑ的耳朵裡，本來早聽到過革命黨這一句話，今年又親眼見過殺掉革命黨。但他有一種不知從那裡來的意見，以為革命黨便是造反，造反便是與他為難，所以一向是「深惡而痛絕之」的。殊不料這卻使百裡聞名的舉人老爺有這樣怕，於是他未免也有些「神往」了，況且未莊的一群鳥男女的慌張的神情，也使阿Ｑ更快意。&lt;/p&gt;

&lt;p&gt;「革命也好罷，」阿Ｑ想，「革這夥媽媽的的命，太可惡！太可恨！……便是我，也要投降革命黨了。」&lt;/p&gt;

&lt;p&gt;阿Ｑ近來用度窘，大約略略有些不平；加以午間喝了兩碗空肚酒，愈加醉得快，一面想一面走，便又飄飄然起來。不知怎麼一來，忽而似乎革命黨便是自己，未莊人卻都是他的俘虜了。他得意之餘，禁不住大聲的嚷道：&lt;/p&gt;

&lt;p&gt;「造反了！造反了！」&lt;/p&gt;

&lt;p&gt;未莊人都用了驚懼的眼光對他看。這一種可憐的眼光，是阿Ｑ從來沒有見過的，一見之下，又使他舒服得如六月裡喝了雪水。他更加高興的走而且喊道：&lt;/p&gt;

&lt;p&gt;「好，……我要什麼就是什麼，我歡喜誰就是誰。得得，鏘鏘！悔不該，酒醉錯斬了鄭賢弟，悔不該，呀呀呀……得得，鏘鏘，得，鏘令鏘！我手執鋼鞭將你打……」&lt;/p&gt;

&lt;p&gt;趙府上的兩位男人和兩個真本家，也正站在大門口論革命。阿Ｑ沒有見，昂了頭直唱過去。&lt;/p&gt;

&lt;p&gt;「得得，……」&lt;/p&gt;

&lt;p&gt;「老Ｑ，」趙太爺怯怯的迎著低聲的叫。&lt;/p&gt;

&lt;p&gt;「鏘鏘，」阿Ｑ料不到他的名字會和「老」字聯結起來，以為是一句別的話，與己無幹，只是唱。「得，鏘，鏘令鏘，鏘！」&lt;/p&gt;

&lt;p&gt;「老Ｑ。」&lt;/p&gt;

&lt;p&gt;「悔不該……」&lt;/p&gt;

&lt;p&gt;「阿Ｑ！」秀才只得直呼其名了。&lt;/p&gt;

&lt;p&gt;阿Ｑ這才站住，歪著頭問道，「什麼？」&lt;/p&gt;

&lt;p&gt;「老Ｑ，……現在……」趙太爺卻又沒有話，「現在……發財麽？」&lt;/p&gt;

&lt;p&gt;「發財？自然。要什麼就是什麼……」&lt;/p&gt;

&lt;p&gt;「阿……Ｑ哥，像我們這樣窮朋友是不要緊的……」趙白眼惴惴的說，似乎想探革命黨的口風。&lt;/p&gt;

&lt;p&gt;「窮朋友？你總比我有錢。」阿Ｑ說著自去了。&lt;/p&gt;

&lt;p&gt;大家都憮然，沒有話。趙太爺父子回家，晚上商量到點燈。趙白眼回家，便從腰間扯下搭連來，交給他女人藏在箱底裡。&lt;/p&gt;

&lt;p&gt;阿Ｑ飄飄然的飛了一通，回到土穀祠，酒已經醒透了。這晚上，管祠的老頭子也意外的和氣，請他喝茶；阿Ｑ便向他要了兩個餅，吃完之後，又要了一支點過的四兩燭和一個樹燭臺，點起來，獨自躺在自己的小屋裡。他說不出的新鮮而且高興，燭火像元夜似的閃閃的跳，他的思想也迸跳起來了：&lt;/p&gt;

&lt;p&gt;「造反？有趣，……來了一陣白盔白甲的革命黨，都拿著板刀，鋼鞭，炸彈，洋炮，三尖兩刃刀，鉤鐮槍，走過土穀祠，叫道，‘阿Ｑ！同去同去！’於是一同去。……&lt;/p&gt;

&lt;p&gt;「這時未莊的一夥鳥男女才好笑哩，跪下叫道，‘阿Ｑ，饒命！’誰聽他！第一個該死的是小Ｄ和趙太爺，還有秀才，還有假洋鬼子，……留幾條麽？王胡本來還可留，但也不要了。……&lt;/p&gt;

&lt;p&gt;「東西，……直走進去打開箱子來：元寶，洋錢，洋紗衫，……秀才娘子的一張寧式床先搬到土穀祠，此外便擺了錢家的桌椅，——或者也就用趙家的罷。自己是不動手的了，叫小Ｄ來搬，要搬得快，搬得不快打嘴巴。……&lt;/p&gt;

&lt;p&gt;「趙司晨的妹子真醜。鄒七嫂的女兒過幾年再說。假洋鬼子的老婆會和沒有辮子的男人睡覺，嚇，不是好東西！秀才的老婆是眼胞上有疤的。……吳媽長久不見了，不知道在那裡，——可惜腳太大。」&lt;/p&gt;

&lt;p&gt;阿Ｑ沒有想得十分停當，已經發了鼾聲，四兩燭還只點去了小半寸，紅焰焰的光照著他張開的嘴。&lt;/p&gt;

&lt;p&gt;「荷荷！」阿Ｑ忽而大叫起來，抬了頭倉皇的四顧，待到看見四兩燭，卻又倒頭睡去了。&lt;/p&gt;

&lt;p&gt;第二天他起得很遲，走出街上看時，樣樣都照舊。他也仍然肚餓，他想著，想不起什麼來；但他忽而似乎有了主意了，慢慢的跨開步，有意無意的走到靜修庵。&lt;/p&gt;

&lt;p&gt;庵和春天時節一樣靜，白的牆壁和漆黑的門。他想了一想，前去打門，一隻狗在裡面叫。他急急拾了幾塊斷磚，再上去較為用力的打，打到黑門上生出許多麻點的時候，才聽得有人來開門。&lt;/p&gt;

&lt;p&gt;阿Ｑ連忙捏好磚頭，擺開馬步，準備和黑狗來開戰。但庵門只開了一條縫，並無黑狗從中衝出，望進去只有一個老尼姑。&lt;/p&gt;

&lt;p&gt;「你又來什麼事？」伊大吃一驚的說。&lt;/p&gt;

&lt;p&gt;「革命了……你知道？……」阿Ｑ說得很含糊。&lt;/p&gt;

&lt;p&gt;「革命革命，革過一革的，……你們要革得我們怎麼樣呢？」老尼姑兩眼通紅的說。&lt;/p&gt;

&lt;p&gt;「什麼？……」阿Ｑ詫異了。&lt;/p&gt;

&lt;p&gt;「你不知道，他們已經來革過了！」&lt;/p&gt;

&lt;p&gt;「誰？……」阿Ｑ更其詫異了。&lt;/p&gt;

&lt;p&gt;「那秀才和洋鬼子！」&lt;/p&gt;

&lt;p&gt;阿Ｑ很出意外，不由的一錯愕；老尼姑見他失了銳氣，便飛速的關了門，阿Ｑ再推時，牢不可開，再打時，沒有回答了。&lt;/p&gt;

&lt;p&gt;那還是上午的事。趙秀才消息靈，一知道革命黨已在夜間進城，便將辮子盤在頂上，一早去拜訪那歷來也不相能的錢洋鬼子。這是「咸與維新」的時候了，所以他們便談得很投機，立刻成了情投意合的同志，也相約去革命。他們想而又想，才想出靜修庵裡有一塊「皇帝萬歲萬萬歲」的龍牌，是應該趕緊革掉的，於是又立刻同到庵裡去革命。因為老尼姑來阻擋，說了三句話，他們便將伊當作滿政府，在頭上很給了不少的棍子和栗鑿。尼姑待他們走後，定了神來檢點，龍牌固然已經碎在地上了，而且又不見了觀音娘娘座前的一個宣德爐。&lt;/p&gt;

&lt;p&gt;這事阿Ｑ後來才知道。他頗悔自己睡著，但也深怪他們不來招呼他。他又退一步想道：&lt;/p&gt;

&lt;p&gt;「難道他們還沒有知道我已經投降了革命黨麽？」&lt;/p&gt;

&lt;h2 id=&quot;第八章不准革命&quot;&gt;第八章　不准革命&lt;/h2&gt;

&lt;p&gt;未莊的人心日見其安靜了。據傳來的消息，知道革命黨雖然進了城，倒還沒有什麼大異樣。知縣大老爺還是原官，不過改稱了什麼，而且舉人老爺也做了什麼——這些名目，未莊人都說不明白——官，帶兵的也還是先前的老把總。只有一件可怕的事是另有幾個不好的革命黨夾在裡面搗亂，第二天便動手剪辮子，聽說那鄰村的航船七斤便著了道兒，弄得不像人樣子了。但這卻還不算大恐怖，因為未莊人本來少上城，即使偶有想進城的，也就立刻變了計，碰不著這危險。阿Ｑ本也想進城去尋他的老朋友，一得這消息，也只得作罷了。&lt;/p&gt;

&lt;p&gt;但未莊也不能說是無改革。幾天之後，將辮子盤在頂上的逐漸增加起來了，早經說過，最先自然是茂才公，其次便是趙司晨和趙白眼，後來是阿Ｑ。倘在夏天，大家將辮子盤在頭頂上或者打一個結，本不算什麼稀奇事，但現在是暮秋，所以這「秋行夏令」的情形，在盤辮家不能不說是萬分的英斷，而在未莊也不能說無關於改革了。&lt;/p&gt;

&lt;p&gt;趙司晨腦後空蕩盪的走來，看見的人大嚷說，&lt;/p&gt;

&lt;p&gt;「豁，革命黨來了！」&lt;/p&gt;

&lt;p&gt;阿Ｑ聽到了很羨慕。他雖然早知道秀才盤辮的大新聞，但總沒有想到自己可以照樣做，現在看見趙司晨也如此，才有了學樣的意思，定下實行的決心。他用一支竹筷將辮子盤在頭頂上，遲疑多時，這才放膽的走去。&lt;/p&gt;

&lt;p&gt;他在街上走，人也看他，然而不說什麼話，阿Ｑ當初很不快，後來便很不平。他近來很容易鬧脾氣了；其實他的生活，倒也並不比造反之前反艱難，人見他也客氣，店鋪也不說要現錢。而阿Ｑ總覺得自己太失意：既然革了命，不應該只是這樣的。況且有一回看見小Ｄ，愈使他氣破肚皮了。&lt;/p&gt;

&lt;p&gt;小Ｄ也將辮子盤在頭頂上了，而且也居然用一支竹筷。阿Ｑ萬料不到他也敢這樣做，自己也決不准他這樣做！小Ｄ是什麼東西呢？他很想即刻揪住他，拗斷他的竹筷，放下他的辮子，並且批他幾個嘴巴，聊且懲罰他忘了生辰八字，也敢來做革命黨的罪。但他終於饒放了，單是怒目而視的吐一口唾沫道「呸！」&lt;/p&gt;

&lt;p&gt;這幾日裡，進城去的只有一個假洋鬼子。趙秀才本也想靠著寄存箱子的淵源，親身去拜訪舉人老爺的，但因為有剪辮的危險，所以也中止了。他寫了一封「黃傘格」的信，托假洋鬼子帶上城，而且托他給自己紹介紹介，去進自由黨。假洋鬼子回來時，向秀才討還了四塊洋錢，秀才便有一塊銀桃子掛在大襟上了；未莊人都驚服，說這是柿油黨的頂子，抵得一個翰林；趙太爺因此也驟然大闊，遠過於他兒子初雋秀才的時候，所以目空一切，見了阿Ｑ，也就很有些不放在眼裡了。&lt;/p&gt;

&lt;p&gt;阿Ｑ正在不平，又時時刻刻感著冷落，一聽得這銀桃子的傳說，他立即悟出自己之所以冷落的原因了：要革命，單說投降，是不行的；盤上辮子，也不行的；第一著仍然要和革命黨去結識。他生平所知道的革命黨只有兩個，城裡的一個早已「嚓」的殺掉了，現在只剩了一個假洋鬼子。他除卻趕緊去和假洋鬼子商量之外，再沒有別的道路了。&lt;/p&gt;

&lt;p&gt;錢府的大門正開著，阿Ｑ便怯怯的躄進去。他一到裡面，很吃了驚，只見假洋鬼子正站在院子的中央，一身烏黑的大約是洋衣，身上也掛著一塊銀桃子，手裡是阿Ｑ曾經領教過的棍子，已經留到一尺多長的辮子都拆開了披在肩背上，蓬頭散髮的像一個劉海仙。對面挺直的站著趙白眼和三個閑人，正在必恭必敬的聽說話。&lt;/p&gt;

&lt;p&gt;阿Ｑ輕輕的走近了，站在趙白眼的背後，心裡想招呼，卻不知道怎麼說才好：叫他假洋鬼子固然是不行的了，洋人也不妥，革命黨也不妥，或者就應該叫洋先生了罷。&lt;/p&gt;

&lt;p&gt;洋先生卻沒有見他，因為白著眼睛講得正起勁：&lt;/p&gt;

&lt;p&gt;「我是性急的，所以我們見面，我總是說：洪哥！我們動手罷！他卻總說道Ｎｏ！——這是洋話，你們不懂的。否則早已成功了。然而這正是他做事小心的地方。他再三再四的請我上湖北，我還沒有肯。誰願意在這小縣城裡做事情。……」&lt;/p&gt;

&lt;p&gt;「唔，……這個……」阿Ｑ候他略停，終於用十二分的勇氣開口了，但不知道因為什麼，又並不叫他洋先生。&lt;/p&gt;

&lt;p&gt;聽著說話的四個人都吃驚的回顧他。洋先生也才看見：&lt;/p&gt;

&lt;p&gt;「什麼？」&lt;/p&gt;

&lt;p&gt;「我……」&lt;/p&gt;

&lt;p&gt;「出去！」&lt;/p&gt;

&lt;p&gt;「我要投……」&lt;/p&gt;

&lt;p&gt;「滾出去！」洋先生揚起哭喪棒來了。&lt;/p&gt;

&lt;p&gt;趙白眼和閑人們便都吆喝道：「先生叫你滾出去，你還不聽麽！」&lt;/p&gt;

&lt;p&gt;阿Ｑ將手向頭上一遮，不自覺的逃出門外；洋先生倒也沒有追。他快跑了六十多步，這才慢慢的走，於是心裡便湧起了憂愁：洋先生不准他革命，他再沒有別的路；從此決不能望有白盔白甲的人來叫他，他所有的抱負，志向，希望，前程，全被一筆勾銷了。至於閑人們傳揚開去，給小Ｄ王胡等輩笑話，倒是還在其次的事。&lt;/p&gt;

&lt;p&gt;他似乎從來沒有經驗過這樣的無聊。他對於自己的盤辮子，彷彿也覺得無意味，要侮蔑；為報仇起見，很想立刻放下辮子來，但也沒有竟放。他遊到夜間，賒了兩碗酒，喝下肚去，漸漸的高興起來了，思想裡才又出現白盔白甲的碎片。&lt;/p&gt;

&lt;p&gt;有一天，他照例的混到夜深，待酒店要關門，才踱回土穀祠去。&lt;/p&gt;

&lt;p&gt;拍，吧～～！&lt;/p&gt;

&lt;p&gt;他忽而聽得一種異樣的聲音，又不是爆竹。阿Ｑ本來是愛看熱鬧，愛管閑事的，便在暗中直尋過去。似乎前面有些腳步聲；他正聽，猛然間一個人從對面逃來了。阿Ｑ一看見，便趕緊翻身跟著逃。那人轉彎，阿Ｑ也轉彎，那人站住了，阿Ｑ也站住。他看後面並無什麼，看那人便是小Ｄ。&lt;/p&gt;

&lt;p&gt;「什麼？」阿Ｑ不平起來了。&lt;/p&gt;

&lt;p&gt;「趙……趙家遭搶了！」小Ｄ氣喘吁吁的說。&lt;/p&gt;

&lt;p&gt;阿Ｑ的心怦怦的跳了。小Ｄ說了便走；阿Ｑ卻逃而又停的兩三回。但他究竟是做過「這路生意」，格外膽大，於是躄出路角，仔細的聽，似乎有些嚷嚷，又仔細的看，似乎許多白盔白甲的人，絡繹的將箱子抬出了，器具抬出了，秀才娘子的寧式床也抬出了，但是不分明，他還想上前，兩隻腳卻沒有動。&lt;/p&gt;

&lt;p&gt;這一夜沒有月，未莊在黑暗裡很寂靜，寂靜到像羲皇時候一般太平。阿Ｑ站著看到自己發煩，也似乎還是先前一樣，在那裡來來往往的搬，箱子抬出了，器具抬出了，秀才娘子的寧式床也抬出了，……抬得他自己有些不信他的眼睛了。但他決計不再上前，卻回到自己的祠裡去了。&lt;/p&gt;

&lt;p&gt;土穀祠裡更漆黑；他關好大門，摸進自己的屋子裡。他躺了好一會，這才定了神，而且發出關於自己的思想來：白盔白甲的人明明到了，並不來打招呼，搬了許多好東西，又沒有自己的份，——這全是假洋鬼子可惡，不准我造反，否則，這次何至於沒有我的份呢？阿Ｑ越想越氣，終於禁不住滿心痛恨起來，毒毒的點一點頭：「不准我造反，只准你造反？媽媽的假洋鬼子，——好，你造反！造反是殺頭的罪名呵，我總要告一狀，看你抓進縣裡去殺頭，——滿門抄斬，——嚓！嚓！」&lt;/p&gt;

&lt;h2 id=&quot;第九章大團圓&quot;&gt;第九章　大團圓&lt;/h2&gt;

&lt;p&gt;趙家遭搶之後，未莊人大抵很快意而且恐慌，阿Ｑ也很快意而且恐慌。但四天之後，阿Ｑ在半夜裡忽被抓進縣城裡去了。那時恰是暗夜，一隊兵，一隊團丁，一隊員警，五個偵探，悄悄地到了未莊，乘昏暗圍住土穀祠，正對門架好機關槍；然而阿Ｑ不衝出。許多時沒有動靜，把總焦急起來了，懸了二十千的賞，才有兩個團丁冒了險，逾垣進去，裡應外合，一擁而入，將阿Ｑ抓出來；直待擒出祠外面的機關槍左近，他才有些清醒了。&lt;/p&gt;

&lt;p&gt;到進城，已經是正午，阿Ｑ見自己被攙進一所破衙門，轉了五六個彎，便推在一間小屋裡。他剛剛一蹌踉，那用整株的木料做成的柵欄門便跟著他的腳跟闔上了，其餘的三面都是牆壁，仔細看時，屋角上還有兩個人。&lt;/p&gt;

&lt;p&gt;阿Ｑ雖然有些忐忑，卻並不很苦悶，因為他那土穀祠裡的臥室，也並沒有比這間屋子更高明。那兩個也彷彿是鄉下人，漸漸和他兜搭起來了，一個說是舉人老爺要追他祖父欠下來的陳租，一個不知道為了什麼事。他們問阿Ｑ，阿Ｑ爽利的答道，「因為我想造反。」&lt;/p&gt;

&lt;p&gt;他下半天便又被抓出柵欄門去了，到得大堂，上面坐著一個滿頭剃得精光的老頭子。阿Ｑ疑心他是和尚，但看見下麵站著一排兵，兩旁又站著十幾個長衫人物，也有滿頭剃得精光像這老頭子的，也有將一尺來長的頭髮披在背後像那假洋鬼子的，都是一臉橫肉，怒目而視的看他；他便知道這人一定有些來歷，膝關節立刻自然而然的寬鬆，便跪了下去了。&lt;/p&gt;

&lt;p&gt;「站著說！不要跪！」長衫人物都吆喝說。&lt;/p&gt;

&lt;p&gt;阿Ｑ雖然似乎懂得，但總覺得站不住，身不由己的蹲了下去，而且終於趁勢改為跪下了。&lt;/p&gt;

&lt;p&gt;「奴隸性！……」長衫人物又鄙夷似的說，但也沒有叫他起來。&lt;/p&gt;

&lt;p&gt;「你從實招來罷，免得吃苦。我早都知道了。招了可以放你。」那光頭的老頭子看定了阿Ｑ的臉，沈靜的清楚的說。&lt;/p&gt;

&lt;p&gt;「招罷！」長衫人物也大聲說。&lt;/p&gt;

&lt;p&gt;「我本來要……來投……」阿Ｑ胡裡胡塗的想了一通，這才斷斷續續的說。&lt;/p&gt;

&lt;p&gt;「那麼，為什麼不來的呢？」老頭子和氣的問。&lt;/p&gt;

&lt;p&gt;「假洋鬼子不准我！」&lt;/p&gt;

&lt;p&gt;「胡說！此刻說，也遲了。現在你的同黨在那裡？」&lt;/p&gt;

&lt;p&gt;「什麼？……」&lt;/p&gt;

&lt;p&gt;「那一晚打劫趙家的一夥人。」&lt;/p&gt;

&lt;p&gt;「他們沒有來叫我。他們自己搬走了。」阿Ｑ提起來便憤憤。&lt;/p&gt;

&lt;p&gt;「走到那裡去了呢？說出來便放你了。」老頭子更和氣了。&lt;/p&gt;

&lt;p&gt;「我不知道，……他們沒有來叫我……」&lt;/p&gt;

&lt;p&gt;然而老頭子使了一個眼色，阿Ｑ便又被抓進柵欄門裡了。他第二次抓出柵欄門，是第二天的上午。&lt;/p&gt;

&lt;p&gt;大堂的情形都照舊。上面仍然坐著光頭的老頭子，阿Ｑ也仍然下了跪。&lt;/p&gt;

&lt;p&gt;老頭子和氣的問道，「你還有什麼話說麽？」&lt;/p&gt;

&lt;p&gt;阿Ｑ一想，沒有話，便回答說，「沒有。」&lt;/p&gt;

&lt;p&gt;於是一個長衫人物拿了一張紙，並一支筆送到阿Ｑ的面前，要將筆塞在他手裡。阿Ｑ這時很吃驚，幾乎「魂飛魄散」了：因為他的手和筆相關，這回是初次。他正不知怎樣拿；那人卻又指著一處地方教他畫花押。&lt;/p&gt;

&lt;p&gt;「我……我……不認得字。」阿Ｑ一把抓住了筆，惶恐而且慚愧的說。&lt;/p&gt;

&lt;p&gt;「那麼，便宜你，畫一個圓圈！」&lt;/p&gt;

&lt;p&gt;阿Ｑ要畫圓圈了，那手捏著筆卻只是抖。於是那人替他將紙鋪在地上，阿Ｑ伏下去，使盡了平生的力氣畫圓圈。他生怕被人笑話，立志要畫得圓，但這可惡的筆不但很沈重，並且不聽話，剛剛一抖一抖的幾乎要合縫，卻又向外一聳，畫成瓜子模樣了。&lt;/p&gt;

&lt;p&gt;阿Ｑ正羞愧自己畫得不圓，那人卻不計較，早已掣了紙筆去，許多人又將他第二次抓進柵欄門。&lt;/p&gt;

&lt;p&gt;他第二次進了柵欄，倒也並不十分懊惱。他以為人生天地之間，大約本來有時要抓進抓出，有時要在紙上畫圓圈的，惟有圈而不圓，卻是他「行狀」上的一個汙點。但不多時也就釋然了，他想：孫子才畫得很圓的圓圈呢。於是他睡著了。&lt;/p&gt;

&lt;p&gt;然而這一夜，舉人老爺反而不能睡：他和把總嘔了氣了。舉人老爺主張第一要追贓，把總主張第一要示眾。把總近來很不將舉人老爺放在眼裡了，拍案打凳的說道，「懲一儆百！你看，我做革命黨還不上二十天，搶案就是十幾件，全不破案，我的面子在那裡？破了案，你又來迂。不成！這是我管的！」舉人老爺窘急了，然而還堅持，說是倘若不追贓，他便立刻辭了幫辦民政的職務。而把總卻道，「請便罷！」於是舉人老爺在這一夜竟沒有睡，但幸第二天倒也沒有辭。&lt;/p&gt;

&lt;p&gt;阿Ｑ第三次抓出柵欄門的時候，便是舉人老爺睡不著的那一夜的明天的上午了。他到了大堂，上面還坐著照例的光頭老頭子；阿Ｑ也照例的下了跪。&lt;/p&gt;

&lt;p&gt;老頭子很和氣的問道，「你還有什麼話麽？」&lt;/p&gt;

&lt;p&gt;阿Ｑ一想，沒有話，便回答說，「沒有。」&lt;/p&gt;

&lt;p&gt;許多長衫和短衫人物，忽然給他穿上一件洋布的白背心，上面有些黑字。阿Ｑ很氣苦：因為這很像是帶孝，而帶孝是晦氣的。然而同時他的兩手反縛了，同時又被一直抓出衙門外去了。&lt;/p&gt;

&lt;p&gt;阿Ｑ被抬上了一輛沒有蓬的車，幾個短衣人物也和他同坐在一處。這車立刻走動了，前面是一班背著洋炮的兵們和團丁，兩旁是許多張著嘴的看客，後面怎樣，阿Ｑ沒有見。但他突然覺到了：這豈不是去殺頭麽？他一急，兩眼發黑，耳朵裡喤的一聲，似乎發昏了。然而他又沒有全發昏，有時雖然著急，有時卻也泰然；他意思之間，似乎覺得人生天地間，大約本來有時也未免要殺頭的。&lt;/p&gt;

&lt;p&gt;他還認得路，於是有些詫異了：怎麼不向著法場走呢？他不知道這是在遊街，在示眾。但即使知道也一樣，他不過便以為人生天地間，大約本來有時也未免要遊街要示眾罷了。&lt;/p&gt;

&lt;p&gt;他省悟了，這是繞到法場去的路，這一定是「嚓」的去殺頭。他惘惘的向左右看，全跟著馬蟻似的人，而在無意中，卻在路旁的人叢中發見了一個吳媽。很久違，伊原來在城裡做工了。阿Ｑ忽然很羞愧自己沒志氣：竟沒有唱幾句戲。他的思想彷彿旋風似的在腦裡一迴旋：《小孤孀上墳》欠堂皇，《龍虎鬥》裡的「悔不該……」也太乏，還是「手執鋼鞭將你打」罷。他同時想手一揚，才記得這兩手原來都捆著，於是「手執鋼鞭」也不唱了。&lt;/p&gt;

&lt;p&gt;「過了二十年又是一個……」阿Ｑ在百忙中，「無師自通」的說出半句從來不說的話。&lt;/p&gt;

&lt;p&gt;「好！！！」從人叢裡，便發出豺狼的嗥叫一般的聲音來。&lt;/p&gt;

&lt;p&gt;車子不住的前行，阿Ｑ在喝采聲中，輪轉眼睛去看吳媽，似乎伊一向並沒有見他，卻只是出神的看著兵們背上的洋炮。&lt;/p&gt;

&lt;p&gt;阿Ｑ於是再看那些喝采的人們。&lt;/p&gt;

&lt;p&gt;這剎那中，他的思想又彷彿旋風似的在腦裡一迴旋了。四年之前，他曾在山腳下遇見一隻餓狼，永是不近不遠的跟定他，要吃他的肉。他那時嚇得幾乎要死，幸而手裡有一柄斫柴刀，才得仗這壯了膽，支持到未莊；可是永遠記得那狼眼睛，又凶又怯，閃閃的像兩顆鬼火，似乎遠遠的來穿透了他的皮肉。而這回他又看見從來沒有見過的更可怕的眼睛了，又鈍又鋒利，不但已經咀嚼了他的話，並且還要咀嚼他皮肉以外的東西，永是不近不遠的跟他走。&lt;/p&gt;

&lt;p&gt;這些眼睛們似乎連成一氣，已經在那裡咬他的靈魂。&lt;/p&gt;

&lt;p&gt;「救命，……」&lt;/p&gt;

&lt;p&gt;然而阿Ｑ沒有說。他早就兩眼發黑，耳朵裡嗡的一聲，覺得全身彷彿微塵似的迸散了。&lt;/p&gt;

&lt;p&gt;至於當時的影響，最大的倒反在舉人老爺，因為終於沒有追贓，他全家都號啕了。其次是趙府，非特秀才因為上城去報官，被不好的革命黨剪了辮子，而且又破費了二十千的賞錢，所以全家也號啕了。從這一天以來，他們便漸漸的都發生了遺老的氣味。&lt;/p&gt;

&lt;p&gt;至於輿論，在未莊是無異議，自然都說阿Ｑ壞，被槍斃便是他的壞的證據：不壞又何至於被槍斃呢？而城裡的輿論卻不佳，他們多半不滿足，以為槍斃並無殺頭這般好看；而且那是怎樣的一個可笑的死囚呵，游了那麼久的街，竟沒有唱一句戲：他們白跟一趟了。&lt;/p&gt;

</description>
        <pubDate>Thu, 01 Dec 1921 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/books/aqzhengzhuan.html</link>
        <guid isPermaLink="true">http://localhost:4000/books/aqzhengzhuan.html</guid>
        
        <category>chinese</category>
        
        <category>luxun</category>
        
        <category>nahan</category>
        
        
        <category>books</category>
        
      </item>
    
      <item>
        <title>狂人日记 (Simplified Chinese)</title>
        <description>&lt;h2 id=&quot;一&quot;&gt;一&lt;/h2&gt;

&lt;p&gt;今天晚上，很好的月光。&lt;/p&gt;

&lt;p&gt;我不见他，已是三十多年；今天见了，精神分外爽快。才知道以前的三十多年，全是发昏；然而须十分小心。不然，那赵家的狗，何以看我两眼呢？&lt;/p&gt;

&lt;p&gt;我怕得有理。&lt;/p&gt;

&lt;h2 id=&quot;二&quot;&gt;二&lt;/h2&gt;

&lt;p&gt;今天全没月光，我知道不妙。早上小心出门，赵贵翁的眼色便怪：似乎怕我，似乎想害我。还有七八个人，交头接耳的议论我，又怕我看见。一路上的人，都是如此。其中最凶的一个人，张着嘴，对我笑了一笑；我便从头直冷到脚根，晓得他们布置，都已妥当了。&lt;/p&gt;

&lt;p&gt;我可不怕，仍旧走我的路。前面一伙小孩子，也在那里议论我；眼色也同赵贵翁一样，脸色也铁青。我想我同小孩子有什么仇，他也这样。忍不住大声说，“你告诉我！”他们可就跑了。&lt;/p&gt;

&lt;p&gt;我想：我同赵贵翁有什么仇，同路上的人又有什么仇；只有廿年以前，把古久先生的陈年流水簿子，踹了一脚，古久先生很不高兴。赵贵翁虽然不认识他，一定也听到风声，代抱不平；约定路上的人，同我作冤对。但是小孩子呢？那时候，他们还没有出世，何以今天也睁着怪眼睛，似乎怕我，似乎想害我。这真教我怕，教我纳罕而且伤心。&lt;/p&gt;

&lt;p&gt;我明白了。这是他们娘老子教的！&lt;/p&gt;

&lt;h2 id=&quot;三&quot;&gt;三&lt;/h2&gt;

&lt;p&gt;晚上总是睡不着。凡事须得研究，才会明白。&lt;/p&gt;

&lt;p&gt;他们——也有给知县打枷过的，也有给绅士掌过嘴的，也有衙役占了他妻子的，也有老子娘被债主逼死的；他们那时候的脸色，全没有昨天这么怕，也没有这么凶。&lt;/p&gt;

&lt;p&gt;最奇怪的是昨天街上的那个女人，打他儿子，嘴里说道，“老子呀！我要咬你几口才出气！”他眼睛却看着我。我出了一惊，遮掩不住；那青面獠牙的一伙人，便都哄笑起来。陈老五赶上前，硬把我拖回家中了。&lt;/p&gt;

&lt;p&gt;拖我回家，家里的人都装作不认识我；他们的眼色，也全同别人一样。进了书房，便反扣上门，宛然是关了一只鸡鸭。这一件事，越教我猜不出底细。&lt;/p&gt;

&lt;p&gt;前几天，狼子村的佃户来告荒，对我大哥说，他们村里的一个大恶人，给大家打死了；几个人便挖出他的心肝来，用油煎炒了吃，可以壮壮胆子。我插了一句嘴，佃户和大哥便都看我几眼。今天才晓得他们的眼光，全同外面的那伙人一模一样。&lt;/p&gt;

&lt;p&gt;想起来，我从顶上直冷到脚跟。&lt;/p&gt;

&lt;p&gt;他们会吃人，就未必不会吃我。&lt;/p&gt;

&lt;p&gt;你看那女人“咬你几口”的话，和一伙青面獠牙人的笑，和前天佃户的话，明明是暗号。我看出他话中全是毒，笑中全是刀。他们的牙齿，全是白厉厉的排着，这就是吃人的家伙。&lt;/p&gt;

&lt;p&gt;照我自己想，虽然不是恶人，自从踹了古家的簿子，可就难说了。他们似乎别有心思，我全猜不出。况且他们一翻脸，便说人是恶人。我还记得大哥教我做论，无论怎样好人，翻他几句，他便打上几个圈；原谅坏人几句，他便说“翻天妙手，与众不同”。我那里猜得到他们的心思，究竟怎样；况且是要吃的时候。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;凡事总须研究，才会明白。古来时常吃人，我也还记得，可是不甚清楚。我翻开历史一查，这历史没有年代，歪歪斜斜的每页上都写着“仁义道德”几个字。我横竖睡不着，仔细看了半夜，才从字缝里看出字来，满本都写着两个字是“吃人”！&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;书上写着这许多字，佃户说了这许多话，却都笑吟吟的睁着怪眼看我。&lt;/p&gt;

&lt;p&gt;我也是人，他们想要吃我了！&lt;/p&gt;

&lt;h2 id=&quot;四&quot;&gt;四&lt;/h2&gt;

&lt;p&gt;早上，我静坐了一会儿。陈老五送进饭来，一碗菜，一碗蒸鱼；这鱼的眼睛，白而且硬，张着嘴，同那一伙想吃人的人一样。吃了几筷，滑溜溜的不知是鱼是人，便把它兜肚连肠的吐出。&lt;/p&gt;

&lt;p&gt;我说“老五，对大哥说，我闷得慌，想到园里走走。”老五不答应，走了；停一会，可就来开了门。&lt;/p&gt;

&lt;p&gt;我也不动，研究他们如何摆布我；知道他们一定不肯放松。果然！我大哥引了一个老头子，慢慢走来；他满眼凶光，怕我看出，只是低头向着地，从眼镜横边暗暗看我。大哥说，“今天你仿佛很好。”我说“是的。”大哥说，“今天请何先生来，给你诊一诊。”我说“可以！”其实我岂不知道这老头子是刽子手扮的！无非借了看脉这名目，揣一揣肥瘠：因这功劳，也分一片肉吃。我也不怕；虽然不吃人，胆子却比他们还壮。伸出两个拳头，看他如何下手。老头子坐着，闭了眼睛，摸了好一会，呆了好一会；便张开他鬼眼睛说，“不要乱想。静静的养几天，就好了。”&lt;/p&gt;

&lt;p&gt;不要乱想，静静的养！养肥了，他们是自然可以多吃；我有什么好处，怎么会“好了”？他们这群人，又想吃人，又是鬼鬼祟祟，想法子遮掩，不敢直截下手，真要令我笑死。我忍不住，便放声大笑起来，十分快活。自己晓得这笑声里面，有的是义勇和正气。老头子和大哥，都失了色，被我这勇气正气镇压住了。&lt;/p&gt;

&lt;p&gt;但是我有勇气，他们便越想吃我，沾光一点这勇气。老头子跨出门，走不多远，便低声对大哥说道，“赶紧吃罢！”大哥点点头。原来也有你！这一件大发见，虽似意外，也在意中：合伙吃我的人，便是我的哥哥！&lt;/p&gt;

&lt;p&gt;吃人的是我哥哥！&lt;/p&gt;

&lt;p&gt;我是吃人的人的兄弟！&lt;/p&gt;

&lt;p&gt;我自己被人吃了，可仍然是吃人的人的兄弟！&lt;/p&gt;

&lt;h2 id=&quot;五&quot;&gt;五&lt;/h2&gt;

&lt;p&gt;这几天是退一步想：假使那老头子不是刽子手扮的，真是医生，也仍然是吃人的人。他们的祖师李时珍做的“本草什么”上，明明写着人肉可以煎吃；他还能说自己不吃人么？&lt;/p&gt;

&lt;p&gt;至于我家大哥，也毫不冤枉他。他对我讲书的时候，亲口说过可以“易子而食”；又一回偶然议论起一个不好的人，他便说不但该杀，还当“食肉寝皮”。我那时年纪还小，心跳了好半天。前天狼子村佃户来说吃心肝的事，他也毫不奇怪，不住的点头。可见心思是同从前一样狠。既然可以“易子而食”，便什么都易得，什么人都吃得。我从前单听他讲道理，也胡涂过去；现在晓得他讲道理的时候，不但唇边还抹着人油，而且心里满装着吃人的意思。&lt;/p&gt;

&lt;h2 id=&quot;六&quot;&gt;六&lt;/h2&gt;

&lt;p&gt;黑漆漆的，不知是日是夜。赵家的狗又叫起来了。&lt;/p&gt;

&lt;p&gt;狮子似的凶心，兔子的怯弱，狐狸的狡猾，……&lt;/p&gt;

&lt;h2 id=&quot;七&quot;&gt;七&lt;/h2&gt;

&lt;p&gt;我晓得他们的方法，直捷杀了，是不肯的，而且也不敢，怕有祸祟。所以他们大家联络，布满了罗网，逼我自戕。试看前几天街上男女的样子，和这几天我大哥的作为，便足可悟出八九分了。最好是解下腰带，挂在梁上，自己紧紧勒死；他们没有杀人的罪名，又偿了心愿，自然都欢天喜地的发出一种呜呜咽咽的笑声。否则惊吓忧愁死了，虽则略瘦，也还可以首肯几下。&lt;/p&gt;

&lt;p&gt;他们是只会吃死肉的！——记得什么书上说，有一种东西，叫”海乙那”的，眼光和样子都很难看；时常吃死肉，连极大的骨头，都细细嚼烂，咽下肚子去，想起来也教人害怕。”海乙那”是狼的亲眷，狼是狗的本家。前天赵家的狗，看我几眼，可见他也同谋，早已接洽。老头子眼看着地，岂能瞒得我过。&lt;/p&gt;

&lt;p&gt;最可怜的是我的大哥，他也是人，何以毫不害怕；而且合伙吃我呢？还是历来惯了，不以为非呢？还是丧了良心，明知故犯呢？&lt;/p&gt;

&lt;p&gt;我诅咒吃人的人，先从他起头；要劝转吃人的人，也先从他下手。&lt;/p&gt;

&lt;h2 id=&quot;八&quot;&gt;八&lt;/h2&gt;

&lt;p&gt;其实这种道理，到了现在，他们也该早已懂得，……&lt;/p&gt;

&lt;p&gt;忽然来了一个人；年纪不过二十左右，相貌是不很看得清楚，满面笑容，对了我点头，他的笑也不像真笑。我便问他，“吃人的事，对么？”他仍然笑着说，“不是荒年，怎么会吃人。”我立刻就晓得，他也是一伙，喜欢吃人的；便自勇气百倍，偏要问他。&lt;/p&gt;

&lt;p&gt;“对么？”&lt;/p&gt;

&lt;p&gt;“这等事问他什么。你真会……说笑话。……今天天气很好。”&lt;/p&gt;

&lt;p&gt;天气是好，月色也很亮了。可是我要问你，“对么？”&lt;/p&gt;

&lt;p&gt;他不以为然了。含含糊胡的答道，“不……”&lt;/p&gt;

&lt;p&gt;“不对？他们何以竟吃？！”&lt;/p&gt;

&lt;p&gt;“没有的事……”&lt;/p&gt;

&lt;p&gt;“没有的事？狼子村现吃；还有书上都写着，通红斩新！”&lt;/p&gt;

&lt;p&gt;他便变了脸，铁一般青。睁着眼说，“有许有的，这是从来如此……”&lt;/p&gt;

&lt;p&gt;“从来如此，便对么？”&lt;/p&gt;

&lt;p&gt;“我不同你讲这些道理；总之你不该说，你说便是你错！”&lt;/p&gt;

&lt;p&gt;我直跳起来，张开眼，这人便不见了。全身出了一大片汗。他的年纪，比我大哥小得远，居然也是一伙；这一定是他娘老子先教的。还怕已经教给他儿子了；所以连小孩子，也都恶狠狠的看我。&lt;/p&gt;

&lt;h2 id=&quot;九&quot;&gt;九&lt;/h2&gt;

&lt;p&gt;&lt;span class=&quot;evidence&quot;&gt;自己想吃人，又怕被别人吃了&lt;/span&gt;，都用着疑心极深的眼光，面面相觑。&lt;/p&gt;

&lt;p&gt;去了这心思，放心做事走路吃饭睡觉，何等舒服。这只是一条门槛，一个关头。他们可是父子兄弟夫妇朋友师生仇敌和各不相识的人，都结成一伙，互相劝勉，互相牵掣，死也不肯跨过这一步。&lt;/p&gt;

&lt;h2 id=&quot;十&quot;&gt;十&lt;/h2&gt;

&lt;p&gt;大清早，去寻我大哥；他立在堂门外看天，我便走到他背后，拦住门，格外沉静，格外和气的对他说，&lt;/p&gt;

&lt;p&gt;“大哥，我有话告诉你。”&lt;/p&gt;

&lt;p&gt;“你说就是，”他赶紧回过脸来，点点头。&lt;/p&gt;

&lt;p&gt;“我只有几句话，可是说不出来。大哥，大约当初野蛮的人，都吃过一点人。后来因为心思不同，有的不吃人了，一味要好，便变了人，变了真的人。有的却还吃，——也同虫子一样，有的变了鱼鸟猴子，一直变到人。有的不要好，至今还是虫子。这吃人的人比不吃人的人，何等惭愧。怕比虫子的惭愧猴子，还差得很远很远。&lt;/p&gt;

&lt;p&gt;“易牙蒸了他儿子，给桀纣吃，还是一直从前的事。谁晓得从盘古开辟天地以后，一直吃到易牙的儿子；从易牙的儿子，一直吃到徐锡林；从徐锡林，又一直吃到狼子村捉住的人。去年城里杀了犯人，还有一个生痨病的人，用馒头蘸血舐。&lt;/p&gt;

&lt;p&gt;“他们要吃我，你一个人，原也无法可想；然而又何必去入伙。吃人的人，什么事做不出；他们会吃我，也会吃你，一伙里面，也会自吃。但只要转一步，只要立刻改了，也就是人人太平。虽然从来如此，我们今天也可以格外要好，说是不能！大哥，我相信你能说，前天佃户要减租，你说过不能。”&lt;/p&gt;

&lt;p&gt;当初，他还只是冷笑，随后眼光便凶狠起来，一到说破他们的隐情，那就满脸都变成青色了。大门外立着一伙人，赵贵翁和他的狗，也在里面，都探头探脑的挨进来。有的是看不出面貌，似乎用布蒙着；有的是仍旧青面獠牙，抿着嘴笑。我认识他们是一伙，都是吃人的人。可是也晓得他们心思很不一样，一种是以为从来如此，应该吃的；一种是知道不该吃，可是仍然要吃，又怕别人说破他，所以听了我的话，越发气愤不过，可是抿着嘴冷笑。&lt;/p&gt;

&lt;p&gt;这时候，大哥也忽然显出凶相，高声喝道，&lt;/p&gt;

&lt;p&gt;“都出去！疯子有什么好看！”&lt;/p&gt;

&lt;p&gt;这时候，我又懂得一件他们的巧妙了。他们岂但不肯改，而且早已布置；预备下一个疯子的名目罩上我。将来吃了，不但太平无事，怕还会有人见情。佃户说的大家吃了一个恶人，正是这方法。这是他们的老谱！&lt;/p&gt;

&lt;p&gt;陈老五也气愤愤的直走进来。如何按得住我的口，我偏要对这伙人说，&lt;/p&gt;

&lt;p&gt;“你们可以改了，从真心改起！要晓得将来容不得吃人的人，活在世上。&lt;/p&gt;

&lt;p&gt;“你们要不改，自己也会吃尽。即使生得多，也会给真的人除灭了，同猎人打完狼子一样！——同虫子一样！”&lt;/p&gt;

&lt;p&gt;那一伙人，都被陈老五赶走了。大哥也不知那里去了。陈老五劝我回屋子里去。屋里面全是黑沉沉的。横梁和椽子都在头上发抖；抖了一会，就大起来，堆在我身上。&lt;/p&gt;

&lt;p&gt;万分沉重，动弹不得；他的意思是要我死。我晓得他的沉重是假的，便挣扎出来，出了一身汗。可是偏要说，&lt;/p&gt;

&lt;p&gt;“你们立刻改了，从真心改起！你们要晓得将来是容不得吃人的人，……”&lt;/p&gt;

&lt;h2 id=&quot;十一&quot;&gt;十一&lt;/h2&gt;

&lt;p&gt;太阳也不出，门也不开，日日是两顿饭。&lt;/p&gt;

&lt;p&gt;我捏起筷子，便想起我大哥；晓得妹子死掉的缘故，也全在他。那时我妹子才五岁，可爱可怜的样子，还在眼前。母亲哭个不住，他却劝母亲不要哭；大约因为自己吃了，哭起来不免有点过意不去。如果还能过意不去，……&lt;/p&gt;

&lt;p&gt;妹子是被大哥吃了，母亲知道没有，我可不得而知。&lt;/p&gt;

&lt;p&gt;母亲想也知道；不过哭的时候，却并没有说明，大约也以为应当的了。记得我四五岁时，坐在堂前乘凉，大哥说爷娘生病，做儿子的须割下一片肉来，煮熟了请他吃，才算好人；母亲也没有说不行。一片吃得，整个的自然也吃得。但是那天的哭法，现在想起来，实在还教人伤心，这真是奇极的事！&lt;/p&gt;

&lt;h2 id=&quot;十二&quot;&gt;十二&lt;/h2&gt;

&lt;p&gt;不能想了。&lt;/p&gt;

&lt;p&gt;四千年来时时吃人的地方，今天才明白，我也在其中混了多年；大哥正管着家务，妹子恰恰死了，他未必不和在饭菜里，暗暗给我们吃。&lt;/p&gt;

&lt;p&gt;我未必无意之中，不吃了我妹子的几片肉，现在也轮到我自己，……&lt;/p&gt;

&lt;p&gt;有了四千年吃人履历的我，当初虽然不知道，现在明白，难见真的人！&lt;/p&gt;

&lt;h2 id=&quot;十三&quot;&gt;十三&lt;/h2&gt;

&lt;p&gt;没有吃过人的孩子，或者还有？&lt;/p&gt;

&lt;p&gt;救救孩子……&lt;/p&gt;

</description>
        <pubDate>Mon, 01 Apr 1918 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/books/kuangrenriji.html</link>
        <guid isPermaLink="true">http://localhost:4000/books/kuangrenriji.html</guid>
        
        <category>chinese</category>
        
        <category>luxun</category>
        
        <category>story</category>
        
        
        <category>books</category>
        
      </item>
    
  </channel>
</rss>
